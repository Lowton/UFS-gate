<!DOCTYPE html >

<html lang="en">
<head>
<meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
<meta content="text/html; charset=utf-8" http-equiv="content-type">
<title>PokemonGoMap.Info - World Map</title>
<meta content="pokemon go map, world map, pokemon go, map, raids, pokestop map, gym map, pokemon location map, poke go map, raid map" name="keywords"/>
<meta content="PokemonGoMap.Info provides the community with a worldwide pokestop, gym + raid map and much more! Currently 5 million+ locations and counting" name="description"/>
<meta content="https://www.pokemongomap.info/images/fbimage.jpg" property="og:image"/>
<meta content="360" property="og:image:width"/>
<meta content="360" property="og:image:height"/>
<meta content="PokemonGoMap.Info - World Map" property="og:title"/>
<meta content="https://www.pokemongomap.info/" property="og:url"/>
<meta content="PokemonGoMap.info" property="og:site_name"/>
<meta content="website" property="og:type"/>
<meta content="PokemonGoMap.Info provides the community with a worldwide pokestop, gym + raid map and much more! Currently 5 million+ locations and counting" property="og:description"/>
<meta content="1129655347098326" property="fb:page_id"/>
<meta content="https://www.pokemongomap.info/" name="twitter:url"/>
<meta content="PokemonGoMap.Info - World Map" name="twitter:title"/>
<meta content="PokemonGoMap.Info provides the community with a worldwide pokestop, gym + raid map and much more! Currently 5 million+ locations and counting" name="twitter:description"/>
<meta content="https://www.pokemongomap.info/images/fbimage.jpg" name="twitter:image"/>
<script src="https://www.pokemongomap.info/js/jquery-2.2.4.min.js" type="text/javascript"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAt8iT8OSMCmv3UzlmpLuujBbgtUtUtlK4" type="text/javascript"></script>
<script src="https://www.pokemongomap.info/js/js.cookie.js" type="text/javascript"></script>
<script src="https://www.pokemongomap.info/js/tooltipsterbundle.min.js" type="text/javascript"></script>
<script src="https://www.pokemongomap.info/js/tooltipster-follower.min.js" type="text/javascript"></script>
<script src="https://www.pokemongomap.info/js/jquery.touchSwipe.min.js" type="text/javascript"></script>
<script src="https://www.pokemongomap.info/js/jqueryconfirm.js" type="text/javascript"></script>
<script src="https://www.pokemongomap.info/js/fastclick.js" type="text/javascript"></script>
<script src="https://www.pokemongomap.info/js/clipboard.min.js" type="text/javascript"></script>
<script type="text/javascript">

    if (window.location.hash && window.location.hash == '#_=_') {
         if (window.history && history.pushState) {
             window.history.pushState("", document.title, window.location.pathname);
         } else {
             // Prevent scrolling by storing the page's current scroll offset
             var scroll = {
                 top: document.body.scrollTop,
                 left: document.body.scrollLeft
             };
             window.location.hash = '';
             // Restore the scroll offset, should be flicker free
             document.body.scrollTop = scroll.top;
             document.body.scrollLeft = scroll.left;
         }
     }
    function isNumber(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
}


function inIframe () {
  try {
      return window.self !== window.top;
  } catch (e) {
      return true;
  }
}

if (inIframe())
{
window.location.replace("https://www.pokemongomap.info/includes/iframe.php");
}

    var map;
    var infowindow;
    var markers = [];
    var makecenter = "";
    var makezoom = "";
    var getlatlangzoom = Cookies.get('latlngzoom');
    var checksavestatus = 0;
    var mtimer;
    var loadtimer;
    var timeouttime = 1400;

    var searchmode = 1;

    var makeicon;
    var makeicongym;
    var makeiconroll;
    var makeicongymroll;

    var farmtutorialdone = 0;

    var makeiconscan;
    var makeicondel;
    var makeicondelroll;
    var makeiconlink;
    var makeiconlinkroll;
    var makeiconfav;
    var makeiconfavroll;

    var makeiconfvgym;
    var makeiconfvgymroll;

    var intervaltracking;
    var trackingcount = 45;

    var countnewmsgs = 0;
    var global_getraid_timer = 0;
    var global_getlure_timer = 0;

    var makeiconsizew;
    var makeiconsizeh;
    var makeiconanchorx;
    var makeiconanchory;

    var saveepagex = 0;
    var saveepagey = 0;

    var global_updatekey = "";
    var requestlooptimer = "notset";
    var requestloopcount = 0;
    var requestloopsavelat = "";
    var requestloopsavelng = "";

    var makeiconsizewgym;
    var makeiconsizehgym;
    var makeiconanchorxgym;
    var makeiconanchorygym;

    var getraid_level = "";
    var getraid_boss = "";
    var getraid_bosscp = "";
    var getraid_status = "";

    var getraid_bossmove1 = "";
    var getraid_bossmove2 = "";

    var sessionreloadmsg_active = 0;

    var globalpmonlist = "";

    var raid_countdown = "notset";
    var lure_countdown = "notset";

    var searchincludegym = 1;
    var searchincludepoke = 0;
    var searchregsize = 3;



    var map_theme_light = [{"featureType":"landscape","stylers":[{"hue":"#FFBB00"},{"saturation":43.400000000000006},{"lightness":37.599999999999994},{"gamma":1}]},{"featureType":"road.highway","stylers":[{"hue":"#FFC200"},{"saturation":-61.8},{"lightness":45.599999999999994},{"gamma":1}]},{"featureType":"road.arterial","stylers":[{"hue":"#FF0300"},{"saturation":-100},{"lightness":51.19999999999999},{"gamma":1}]},{"featureType":"road.local","stylers":[{"hue":"#FF0300"},{"saturation":-100},{"lightness":52},{"gamma":1}]},{"featureType":"water","stylers":[{"hue":"#0078FF"},{"saturation":-13.200000000000003},{"lightness":2.4000000000000057},{"gamma":1}]},{"featureType":"poi","stylers":[{"hue":"#00FF6A"},{"saturation":-1.0989010989011234},{"lightness":11.200000000000017},{"gamma":1}]}];

    var map_theme_dark = [{featureType:"all",elementType:"all",stylers:[{invert_lightness:!0},{saturation:10},{lightness:30},{gamma:.5},{hue:"#2a4244"}]}];


    var makestartmaptheme = map_theme_light;
    var makestartmapbg = "#eeeeee";


    var copy_israid = 0;
    var copy_info = "";

    var markericonscan;
    var markericon;
    var markericonroll;
    var markericongym;
    var markericongymroll;
    var markericondel;
    var markericondelroll;
    var markericonlink;
    var markericonlinkroll;
    var markericonfav;
    var markericonfavroll;

    var markericonfvgym;
    var markericonfvgymroll;

    var searchresult_array = {};

    var markericongps;
    var makeicongps;

    var markericonsearcharea;
    var makeiconsearcharea

    var markericonnest;
    var markericonnestroll;

    var makeiconnest;
    var makeiconnestroll;

    var announcement_read = 0;
    if (document.cookie.indexOf('announcementnews9') > -1 ) {
    Cookies.set('announcementnews9', '1', { expires: 800 });
    announcement_read = 1;
    }
    else {
    Cookies.set('announcementnews9', '1', { expires: 800 });
    announcement_read = 0;
    }



    var updatetoken = "0";
    var updateactive = 0;
    if (document.cookie.indexOf('updatetoken') > -1 ) {
    updatetoken = Cookies.get('updatetoken');
    if (updatetoken != "0") {
    updateactive = 1;
    }
    }


    var global_curgym_team;
    var global_curgym_teamid;
    var global_curgym_guard;
    var global_curgym_lastreport;
    var global_curgym_lastchange;
    var global_curgym_prestige;
    var global_curgym_pokemondata;

    var global_tlat = 0;
    var global_tlng = 0;




    var iconteam1;
    var iconteam1roll;
    var iconteam2;
    var iconteam2roll;
    var iconteam3;
    var iconteam3roll;
    var iconteam4;
    var iconteam4roll;

    var markerteam1;
    var markerteam1roll;
    var markerteam2;
    var markerteam2roll;
    var markerteam3;
    var markerteam3roll;
    var markerteam4;
    var markerteam4roll;



    var raidiconteam1;
    var raidiconteam1roll;
    var raidiconteam2;
    var raidiconteam2roll;
    var raidiconteam3;
    var raidiconteam3roll;
    var raidiconteam4;
    var raidiconteam4roll;

    var raidmarkerteam1;
    var raidmarkerteam1roll;
    var raidmarkerteam2;
    var raidmarkerteam2roll;
    var raidmarkerteam3;
    var raidmarkerteam3roll;
    var raidmarkerteam4;
    var raidmarkerteam4roll;




    var raidiconteam1_1;
    var raidiconteam1_2;
    var raidiconteam1_3;
    var raidiconteam1_4;
    var raidiconteam1_5;
    var raidiconteam2_1;
    var raidiconteam2_2;
    var raidiconteam2_3;
    var raidiconteam2_4;
    var raidiconteam2_5;
    var raidiconteam3_1;
    var raidiconteam3_2;
    var raidiconteam3_3;
    var raidiconteam3_4;
    var raidiconteam3_5;
    var raidiconteam4_1;
    var raidiconteam4_2;
    var raidiconteam4_3;
    var raidiconteam4_4;
    var raidiconteam4_5;

    var raidmarkerteam1_1;
    var raidmarkerteam1_2;
    var raidmarkerteam1_3;
    var raidmarkerteam1_4;
    var raidmarkerteam1_5;
    var raidmarkerteam2_1;
    var raidmarkerteam2_2;
    var raidmarkerteam2_3;
    var raidmarkerteam2_4;
    var raidmarkerteam2_5;
    var raidmarkerteam3_1;
    var raidmarkerteam3_2;
    var raidmarkerteam3_3;
    var raidmarkerteam3_4;
    var raidmarkerteam3_5;
    var raidmarkerteam4_1;
    var raidmarkerteam4_2;
    var raidmarkerteam4_3;
    var raidmarkerteam4_4;
    var raidmarkerteam4_5;

    var global_getresult_id = "";
    var global_getresult_lat = "";
    var global_getresult_lng = "";
    var resultmarkeractive = 0;
    var savedtitlemake = "";



    var map_firstload = 1;

    var mousescanx = "";
    var mousescany = "";


    var gps_store_active = 0;
    var gps_store_lat = "";
    var gps_store_lng = "";

    var reqshowactive = 0;
    var callgeocount = 0;
    var reqshowcoords;

    var activityspamcount = 50;
    var activityspamcountfirsthit = 1;

    var spamtrack = setInterval(function(){
    activityspamcount = activityspamcount +1;
    },1000);

    var xhrsave;
    var xhrsaveinfobox;
    var xhrsaveswipe;
    var markerseohtml = "";
    var scanrequestactive = 0;
    var scanrequestmoveblock = 0;
    $('#mousescannew').hide();
    var timeintervalmap;

    var storecurrentmarkerid = "";
    var storecurrentmarkerurl = "";
    var storecurrentmarkertitle = "";
    var makeiconvote = "";
    var systemui_logged = 0;

    var storecurrentmarkerlat = 0;
    var storecurrentmarkerlng = 0;
    var storecurrentpokeid = 0;

    var storecurrentmarkerdesc = "";


    var filteroptionpoke = 1;
    var filteroptiongym = 1;
    var filteroptiontrack = 0;
    var filteroptionraid = 1;
    var filteroptionnest = 0;
    var filteroptionsponsor = 0;

    var filteroptionraidlvl1 = 1;
    var filteroptionraidlvl2 = 1;
    var filteroptionraidlvl3 = 1;
    var filteroptionraidlvl4 = 1;
    var filteroptionraidlvl5 = 1;

    var filteroptionbeen = 0;

    var filteroptionfarm = 0;

    var filteroptionmaptype = 1;
    var filteroptionmaptheme = 1;

    var mapfiltercookies = Cookies.get('mapfilters');
    if (document.cookie.indexOf('mapfilters') > -1 ) {
    var getdatafil = mapfiltercookies.split("[##split##]");
    try { if (getdatafil[0] == "0") {filteroptionpoke = 0;} } catch(err) {}
    try { if (getdatafil[1] == "0") {filteroptiongym = 0;} } catch(err) {}
    try { filteroptionmaptype = getdatafil[2]; } catch(err) {}
    try { filteroptiontrack = getdatafil[3]; } catch(err) {}
    try { if (getdatafil[4] == "1") {filteroptionfarm = 1;} } catch(err) {}
    try { if (getdatafil[5] == "0") {filteroptionraid = 0;} } catch(err) {}
    try { if (getdatafil[6] == "1") {filteroptionnest = 1;} } catch(err) {}
    try { if (getdatafil[7] == "1") {filteroptionbeen = 1;} } catch(err) {}
    try { if (getdatafil[8] == "0") {filteroptionraidlvl1 = 0;} } catch(err) {}
    try { if (getdatafil[13] == "0") {filteroptionraidlvl2 = 0;} } catch(err) {}
    try { if (getdatafil[14] == "0") {filteroptionraidlvl3 = 0;} } catch(err) {}
    try { if (getdatafil[9] == "0") {filteroptionraidlvl4 = 0;} } catch(err) {}
    try { if (getdatafil[10] == "0") {filteroptionraidlvl5 = 0;} } catch(err) {}
    try { if (getdatafil[11] == "1") {filteroptionsponsor = 1;} } catch(err) {}
    try { filteroptionmaptheme = getdatafil[12]; } catch(err) {}
    }


    
    if (systemui_logged != "1") {
      filteroptionbeen = 0;
    }

makeiconscan = "https://www.pokemongomap.info/images/markerscan.png";
makeicongps = "https://www.pokemongomap.info/images/gpsmarker.png";
makeiconsearcharea = "https://www.pokemongomap.info/images/searchicon.png";
makeicon = "https://www.pokemongomap.info/images/markerpoke.png";
makeiconroll = "https://www.pokemongomap.info/images/markerpokeroll.png";
makeicongym = "https://www.pokemongomap.info/images/markergym.png";
makeicongymroll = "https://www.pokemongomap.info/images/markergymroll.png";
makeicondel = "https://www.pokemongomap.info/images/markerdel.png";
makeicondelroll = "https://www.pokemongomap.info/images/markerdelroll.png";
makeiconlink = "https://www.pokemongomap.info/images/markerlink.png";
makeiconlinkroll = "https://www.pokemongomap.info/images/markerlinkroll.png";
makeiconfav = "https://www.pokemongomap.info/images/markerfav.png";
makeiconfavroll = "https://www.pokemongomap.info/images/markerfavroll.png";
makeiconfvgym = "https://www.pokemongomap.info/images/markerfvgym.png";
makeiconfvgymroll = "https://www.pokemongomap.info/images/markerfvgymroll.png";
makeiconsizew = 18;
makeiconsizeh = 20;
makeiconanchorx = 9;
makeiconanchory = 10;


makeiconnest = "https://www.pokemongomap.info/images/markernest.png";
makeiconnestroll = "https://www.pokemongomap.info/images/markernest-roll.png";


iconteam1 = "https://www.pokemongomap.info/images/team1.png";
iconteam1roll = "https://www.pokemongomap.info/images/team1-roll.png";
iconteam2 = "https://www.pokemongomap.info/images/team2.png";
iconteam2roll = "https://www.pokemongomap.info/images/team2-roll.png";
iconteam3 = "https://www.pokemongomap.info/images/team3.png";
iconteam3roll = "https://www.pokemongomap.info/images/team3-roll.png";
iconteam4 = "https://www.pokemongomap.info/images/team4.png";
iconteam4roll = "https://www.pokemongomap.info/images/team4-roll.png";




raidiconteam1 = "https://www.pokemongomap.info/images/raidteam1.png";
raidiconteam1roll = "https://www.pokemongomap.info/images/raidteam1-roll.png";
raidiconteam2 = "https://www.pokemongomap.info/images/raidteam2.png";
raidiconteam2roll = "https://www.pokemongomap.info/images/raidteam2-roll.png";
raidiconteam3 = "https://www.pokemongomap.info/images/raidteam3.png";
raidiconteam3roll = "https://www.pokemongomap.info/images/raidteam3-roll.png";
raidiconteam4 = "https://www.pokemongomap.info/images/raidteam4.png";
raidiconteam4roll = "https://www.pokemongomap.info/images/raidteam4-roll.png";



raidiconteam1_1 = "https://www.pokemongomap.info/images/raidteam1-1.png";
raidiconteam1_2 = "https://www.pokemongomap.info/images/raidteam1-2.png";
raidiconteam1_3 = "https://www.pokemongomap.info/images/raidteam1-3.png";
raidiconteam1_4 = "https://www.pokemongomap.info/images/raidteam1-4.png";
raidiconteam1_5 = "https://www.pokemongomap.info/images/raidteam1-5.png";
raidiconteam2_1 = "https://www.pokemongomap.info/images/raidteam2-1.png";
raidiconteam2_2 = "https://www.pokemongomap.info/images/raidteam2-2.png";
raidiconteam2_3 = "https://www.pokemongomap.info/images/raidteam2-3.png";
raidiconteam2_4 = "https://www.pokemongomap.info/images/raidteam2-4.png";
raidiconteam2_5 = "https://www.pokemongomap.info/images/raidteam2-5.png";
raidiconteam3_1 = "https://www.pokemongomap.info/images/raidteam3-1.png";
raidiconteam3_2 = "https://www.pokemongomap.info/images/raidteam3-2.png";
raidiconteam3_3 = "https://www.pokemongomap.info/images/raidteam3-3.png";
raidiconteam3_4 = "https://www.pokemongomap.info/images/raidteam3-4.png";
raidiconteam3_5 = "https://www.pokemongomap.info/images/raidteam3-5.png";
raidiconteam4_1 = "https://www.pokemongomap.info/images/raidteam4-1.png";
raidiconteam4_2 = "https://www.pokemongomap.info/images/raidteam4-2.png";
raidiconteam4_3 = "https://www.pokemongomap.info/images/raidteam4-3.png";
raidiconteam4_4 = "https://www.pokemongomap.info/images/raidteam4-4.png";
raidiconteam4_5 = "https://www.pokemongomap.info/images/raidteam4-5.png";




var makeiconfarm = "https://www.pokemongomap.info/images/markerfarm.png";
var makeiconfarmroll = "https://www.pokemongomap.info/images/markerfarm-roll.png";

var makeiconfarmelite = "https://www.pokemongomap.info/images/markerfarmelite.png";
var makeiconfarmeliteroll = "https://www.pokemongomap.info/images/markerfarmelite-roll.png";

var makeiconfarmultra = "https://www.pokemongomap.info/images/markerfarmultra.png";
var makeiconfarmultraroll = "https://www.pokemongomap.info/images/markerfarmultra-roll.png";

var makeiconhot = "https://www.pokemongomap.info/images/markerfarmhot.png";
var makeiconhotroll = "https://www.pokemongomap.info/images/markerfarmhot-roll.png";

var makeicongymhot = "https://www.pokemongomap.info/images/markergymhot.png";
var makeicongymhotroll = "https://www.pokemongomap.info/images/markergymhot-roll.png";


var direct_link_access = "0";
var direct_link_404 = "0";

if (direct_link_access == "1" && direct_link_404 == "0"){
  checksavestatus = 1;
  var getlat = "0";
  var getlng = "0";
  makecenter = new google.maps.LatLng(getlat,getlng);
  makezoom = 16;
}
else {
  if (document.cookie.indexOf('latlngzoom') > -1 ) {
  var getdata = getlatlangzoom.split("[##split##]");
  var getlat = getdata[1];
  var getlng = getdata[2];
  makecenter = new google.maps.LatLng(getlat,getlng);
  if (isNumber(getdata[0])) { makezoom = Number(getdata[0]); } else {makezoom = 8;}
  checksavestatus = 1;
  }
  else
  {
  makecenter = new google.maps.LatLng(34.008164291897806, -118.49342830216062);
  makezoom = 15;
  checksavestatus = 0;
  }
}



function set_maptheme(theme) {
if (theme == "1") {
makestartmaptheme = map_theme_light;
makestartmapbg = "#eeeeee";
if (map_firstload == "0") { map.setOptions({styles: makestartmaptheme});}
$("body").removeClass("themedark");
$("body").addClass("themelight");
}
if (theme == "2") {
makestartmaptheme = map_theme_dark;
makestartmapbg = "#111111";
if (map_firstload == "0") { map.setOptions({styles: makestartmaptheme});}
$("body").removeClass("themelight");
$("body").addClass("themedark");
}
}


    function load() {

      var makestartmaptype = "roadmap";
      if (filteroptionmaptype == "1") { makestartmaptype = "roadmap"; }
      if (filteroptionmaptype == "2") { makestartmaptype = "satellite";}
      if (filteroptionmaptype == "3") { makestartmaptype = "hybrid";}
      if (filteroptionmaptype == "4") { makestartmaptype = "terrain";}

    map = new google.maps.Map(document.getElementById("map"), {
        center: makecenter,
        zoom: makezoom,
        minZoom: 6,
        scaleControl: true,
        fullscreenControl: true,
        mapTypeId: makestartmaptype,
        mapTypeControl: false,
        styles: makestartmaptheme,
        backgroundColor: makestartmapbg
      });
    infoWindow = new google.maps.InfoWindow;
    google.maps.event.addListener(map, 'idle', showMarkers);
    google.maps.event.addListener(map, 'dragstart', removeMarkersDrag);
    google.maps.event.addListener(map, 'zoom_changed', removeMarkersZoom);

    map_firstload = 0;

    google.maps.event.addListener(map, 'click', function(e) {
      if (scanrequestactive == "1") {
        scanrequestmoveblock = 1;
        placeMarker(e.latLng, map);
    }
    });

    if (checksavestatus == "0") {
    if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(clientlocation);
    }
    }

    if (filteroptiontrack == "1") {
    geolocate('5');
    intervaltracking = setInterval(function(){
    trackingcount = trackingcount -1;
    if (trackingcount < 1) {trackingcount = 45; geolocate('5');}
    },1000);
  }




  markerteam1 = {
   url: iconteam1,
   size: new google.maps.Size(28*2,26*2),
   scaledSize: new google.maps.Size(28,26),
   origin: new google.maps.Point(0, 0),
   anchor: new google.maps.Point(14, 13)
 };
 markerteam1roll = {
  url: iconteam1roll,
  size: new google.maps.Size(28*2,26*2),
  scaledSize: new google.maps.Size(28,26),
  origin: new google.maps.Point(0, 0),
  anchor: new google.maps.Point(14, 13)
};
markerteam2 = {
 url: iconteam2,
 size: new google.maps.Size(28*2,26*2),
 scaledSize: new google.maps.Size(28,26),
 origin: new google.maps.Point(0, 0),
 anchor: new google.maps.Point(14, 13)
};
markerteam2roll = {
url: iconteam2roll,
size: new google.maps.Size(28*2,26*2),
scaledSize: new google.maps.Size(28,26),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(14, 13)
};
markerteam3 = {
 url: iconteam3,
 size: new google.maps.Size(28*2,26*2),
 scaledSize: new google.maps.Size(28,26),
 origin: new google.maps.Point(0, 0),
 anchor: new google.maps.Point(14, 13)
};
markerteam3roll = {
url: iconteam3roll,
size: new google.maps.Size(28*2,26*2),
scaledSize: new google.maps.Size(28,26),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(14, 13)
};
markerteam4 = {
 url: iconteam4,
 size: new google.maps.Size(28*2,26*2),
 scaledSize: new google.maps.Size(28,26),
 origin: new google.maps.Point(0, 0),
 anchor: new google.maps.Point(14, 13)
};
markerteam4roll = {
url: iconteam4roll,
size: new google.maps.Size(28*2,26*2),
scaledSize: new google.maps.Size(28,26),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(14, 13)
};










raidmarkerteam1 = {
 url: raidiconteam1,
 size: new google.maps.Size(47*2,44*2),
 scaledSize: new google.maps.Size(47,44),
 origin: new google.maps.Point(0, 0),
 anchor: new google.maps.Point(23, 22)
};
raidmarkerteam1roll = {
url: raidiconteam1roll,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};
raidmarkerteam2 = {
url: raidiconteam2,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};
raidmarkerteam2roll = {
url: raidiconteam2roll,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};
raidmarkerteam3 = {
url: raidiconteam3,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};
raidmarkerteam3roll = {
url: raidiconteam3roll,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};
raidmarkerteam4 = {
url: raidiconteam4,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};
raidmarkerteam4roll = {
url: raidiconteam4roll,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};












raidmarkerteam1_1 = {
 url: raidiconteam1_1,
 size: new google.maps.Size(47*2,44*2),
 scaledSize: new google.maps.Size(47,44),
 origin: new google.maps.Point(0, 0),
 anchor: new google.maps.Point(23, 22)
};
raidmarkerteam2_1 = {
url: raidiconteam2_1,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};

raidmarkerteam3_1 = {
url: raidiconteam3_1,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};
raidmarkerteam4_1 = {
url: raidiconteam4_1,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};






raidmarkerteam1_2 = {
 url: raidiconteam1_2,
 size: new google.maps.Size(47*2,44*2),
 scaledSize: new google.maps.Size(47,44),
 origin: new google.maps.Point(0, 0),
 anchor: new google.maps.Point(23, 22)
};
raidmarkerteam2_2 = {
url: raidiconteam2_2,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};

raidmarkerteam3_2 = {
url: raidiconteam3_2,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};
raidmarkerteam4_2 = {
url: raidiconteam4_2,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};








raidmarkerteam1_3 = {
 url: raidiconteam1_3,
 size: new google.maps.Size(47*2,44*2),
 scaledSize: new google.maps.Size(47,44),
 origin: new google.maps.Point(0, 0),
 anchor: new google.maps.Point(23, 22)
};
raidmarkerteam2_3 = {
url: raidiconteam2_3,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};

raidmarkerteam3_3 = {
url: raidiconteam3_3,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};
raidmarkerteam4_3 = {
url: raidiconteam4_3,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};













raidmarkerteam1_4 = {
 url: raidiconteam1_4,
 size: new google.maps.Size(47*2,44*2),
 scaledSize: new google.maps.Size(47,44),
 origin: new google.maps.Point(0, 0),
 anchor: new google.maps.Point(23, 22)
};
raidmarkerteam2_4 = {
url: raidiconteam2_4,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};

raidmarkerteam3_4 = {
url: raidiconteam3_4,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};
raidmarkerteam4_4 = {
url: raidiconteam4_4,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};








raidmarkerteam1_5 = {
 url: raidiconteam1_5,
 size: new google.maps.Size(47*2,44*2),
 scaledSize: new google.maps.Size(47,44),
 origin: new google.maps.Point(0, 0),
 anchor: new google.maps.Point(23, 22)
};
raidmarkerteam2_5 = {
url: raidiconteam2_5,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};

raidmarkerteam3_5 = {
url: raidiconteam3_5,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};
raidmarkerteam4_5 = {
url: raidiconteam4_5,
size: new google.maps.Size(47*2,44*2),
scaledSize: new google.maps.Size(47,44),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(23, 22)
};







    markericonscan = {
      url: makeicongps,
      size: new google.maps.Size(30, 30),
      scaledSize: new google.maps.Size(30, 30),
      origin: new google.maps.Point(0, 0),
      anchor: new google.maps.Point(15, 15)
   };

   markericongps = {
    url: makeicongps,
    size: new google.maps.Size(30, 30),
    scaledSize: new google.maps.Size(30, 30),
    origin: new google.maps.Point(0, 0),
    anchor: new google.maps.Point(15, 15)
  };


  markericonsearcharea = {
   url: makeiconsearcharea,
   size: new google.maps.Size(80, 80),
   scaledSize: new google.maps.Size(80, 80),
   origin: new google.maps.Point(0, 0),
   anchor: new google.maps.Point(40, 40)
 };



    markericon = {
     url: makeicon,
     size: new google.maps.Size(makeiconsizew*2, makeiconsizeh*2),
     scaledSize: new google.maps.Size(makeiconsizew, makeiconsizeh),
     origin: new google.maps.Point(0, 0),
     anchor: new google.maps.Point(makeiconanchorx, makeiconanchory)
   };


   markericonfarm = {
    url: makeiconfarm,
    size: new google.maps.Size(makeiconsizew*2, makeiconsizeh*2),
    scaledSize: new google.maps.Size(makeiconsizew, makeiconsizeh),
    origin: new google.maps.Point(0, 0),
    anchor: new google.maps.Point(makeiconanchorx, makeiconanchory)
  };

  markericonfarmroll = {
   url: makeiconfarmroll,
   size: new google.maps.Size(makeiconsizew*2, makeiconsizeh*2),
   scaledSize: new google.maps.Size(makeiconsizew, makeiconsizeh),
   origin: new google.maps.Point(0, 0),
   anchor: new google.maps.Point(makeiconanchorx, makeiconanchory)
 };



 markericonhot = {
  url: makeiconhot,
  size: new google.maps.Size(makeiconsizew*2, makeiconsizeh*2),
  scaledSize: new google.maps.Size(makeiconsizew, makeiconsizeh),
  origin: new google.maps.Point(0, 0),
  anchor: new google.maps.Point(makeiconanchorx, makeiconanchory)
};

markericonhotroll = {
 url: makeiconhotroll,
 size: new google.maps.Size(makeiconsizew*2, makeiconsizeh*2),
 scaledSize: new google.maps.Size(makeiconsizew, makeiconsizeh),
 origin: new google.maps.Point(0, 0),
 anchor: new google.maps.Point(makeiconanchorx, makeiconanchory)
};


 markericonfarmelite = {
  url: makeiconfarmelite,
  size: new google.maps.Size(makeiconsizew*2, makeiconsizeh*2),
  scaledSize: new google.maps.Size(makeiconsizew, makeiconsizeh),
  origin: new google.maps.Point(0, 0),
  anchor: new google.maps.Point(makeiconanchorx, makeiconanchory)
};
markericonfarmeliteroll = {
 url: makeiconfarmeliteroll,
 size: new google.maps.Size(makeiconsizew*2, makeiconsizeh*2),
 scaledSize: new google.maps.Size(makeiconsizew, makeiconsizeh),
 origin: new google.maps.Point(0, 0),
 anchor: new google.maps.Point(makeiconanchorx, makeiconanchory)
};




markergymhot = {
 url: makeicongymhot,
 size: new google.maps.Size(28*2,26*2),
 scaledSize: new google.maps.Size(28,26),
 origin: new google.maps.Point(0, 0),
 anchor: new google.maps.Point(14, 13)
};
markergymhotroll = {
url: makeicongymhotroll,
size: new google.maps.Size(28*2,26*2),
scaledSize: new google.maps.Size(28,26),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(14, 13)
};


markericonfarmultra = {
 url: makeiconfarmultra,
 size: new google.maps.Size(makeiconsizew*2, makeiconsizeh*2),
 scaledSize: new google.maps.Size(makeiconsizew, makeiconsizeh),
 origin: new google.maps.Point(0, 0),
 anchor: new google.maps.Point(makeiconanchorx, makeiconanchory)
};
markericonfarmultraroll = {
url: makeiconfarmultraroll,
size: new google.maps.Size(makeiconsizew*2, makeiconsizeh*2),
scaledSize: new google.maps.Size(makeiconsizew, makeiconsizeh),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(makeiconanchorx, makeiconanchory)
};



markericonroll = {
url: makeiconroll,
size: new google.maps.Size(makeiconsizew*2, makeiconsizeh*2),
scaledSize: new google.maps.Size(makeiconsizew, makeiconsizeh),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(makeiconanchorx, makeiconanchory)
};



markericongym = {
 url: makeicongym,
 size: new google.maps.Size(makeiconsizew*2, makeiconsizeh*2),
 scaledSize: new google.maps.Size(makeiconsizew, makeiconsizeh),
 origin: new google.maps.Point(0, 0),
 anchor: new google.maps.Point(makeiconanchorx, makeiconanchory)
};

markericongymroll = {
url: makeicongymroll,
size: new google.maps.Size(makeiconsizew*2, makeiconsizeh*2),
scaledSize: new google.maps.Size(makeiconsizew, makeiconsizeh),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(makeiconanchorx, makeiconanchory)
};

markericonlink = {
 url: makeiconlink,
 size: new google.maps.Size(makeiconsizew*2, makeiconsizeh*2),
 scaledSize: new google.maps.Size(makeiconsizew, makeiconsizeh),
 origin: new google.maps.Point(0, 0),
 anchor: new google.maps.Point(makeiconanchorx, makeiconanchory)
};

markericonlinkroll = {
url: makeiconlinkroll,
size: new google.maps.Size(makeiconsizew*2, makeiconsizeh*2),
scaledSize: new google.maps.Size(makeiconsizew, makeiconsizeh),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(makeiconanchorx, makeiconanchory)
};


markericondel = {
 url: makeicondel,
 size: new google.maps.Size(makeiconsizew*2, makeiconsizeh*2),
 scaledSize: new google.maps.Size(makeiconsizew, makeiconsizeh),
 origin: new google.maps.Point(0, 0),
 anchor: new google.maps.Point(makeiconanchorx, makeiconanchory)
};

markericondelroll = {
url: makeicondelroll,
size: new google.maps.Size(makeiconsizew*2, makeiconsizeh*2),
scaledSize: new google.maps.Size(makeiconsizew, makeiconsizeh),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(makeiconanchorx, makeiconanchory)
};

markericonfav = {
 url: makeiconfav,
 size: new google.maps.Size(makeiconsizew*2, makeiconsizeh*2),
 scaledSize: new google.maps.Size(makeiconsizew, makeiconsizeh),
 origin: new google.maps.Point(0, 0),
 anchor: new google.maps.Point(makeiconanchorx, makeiconanchory)
};

markericonfavroll = {
url: makeiconfavroll,
size: new google.maps.Size(makeiconsizew*2, makeiconsizeh*2),
scaledSize: new google.maps.Size(makeiconsizew, makeiconsizeh),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(makeiconanchorx, makeiconanchory)
};



markericonfvgym = {
 url: makeiconfvgym,
 size: new google.maps.Size(28*2,26*2),
 scaledSize: new google.maps.Size(28,26),
 origin: new google.maps.Point(0, 0),
 anchor: new google.maps.Point(14, 13)
};

markericonfvgymroll = {
url: makeiconfvgymroll,
size: new google.maps.Size(28*2,26*2),
scaledSize: new google.maps.Size(28,26),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(14, 13)
};



markericonnest = {
 url: makeiconnest,
 size: new google.maps.Size(50, 48),
 scaledSize: new google.maps.Size(25, 24),
 origin: new google.maps.Point(0, 0),
 anchor: new google.maps.Point(12, 12)
};
markericonnestroll = {
url: makeiconnestroll,
size: new google.maps.Size(50, 48),
scaledSize: new google.maps.Size(25, 24),
origin: new google.maps.Point(0, 0),
anchor: new google.maps.Point(12, 12)
};



  var geolocationDiv = document.createElement('div');
   var geolocationControl = new GeolocationControl(geolocationDiv, map);
   map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(geolocationDiv);

   var filtersDiv = document.createElement('div');
    var filtersControls = new filtersControl(filtersDiv, map);
    map.controls[google.maps.ControlPosition.TOP_RIGHT].push(filtersDiv);

    var searchDiv = document.createElement('div');
     var searchingControls = new searchControl(searchDiv, map);
     map.controls[google.maps.ControlPosition.TOP_RIGHT].push(searchDiv);

     var chatDiv = document.createElement('div');
      var chatControls = new chatControl(chatDiv, map);
      map.controls[google.maps.ControlPosition.TOP_RIGHT].push(chatDiv);

   var loadingDiv = document.createElement('div');
    var loadingControls = new loadingControl(loadingDiv, map);
    map.controls[google.maps.ControlPosition.TOP_LEFT].push(loadingDiv);

// end load function
  }

  function searchControl(controlDiv, map) {

      var controlUI = document.createElement('div');
      controlUI.className = "searchbtn";
      controlUI.title = 'Location Search';
      controlDiv.appendChild(controlUI);

      var controlTextinfo = document.createElement('span');
      controlTextinfo.className = "searchtxt";
      controlTextinfo.innerHTML = '<i class="fa fa-search" aria-hidden="true"></i> Search';
      controlUI.appendChild(controlTextinfo);

      google.maps.event.addDomListener(controlUI, 'click', searchloc);

  }


  function chatControl(controlDiv, map) {

      var controlUI = document.createElement('div');
      controlUI.className = "mapchatbtn";
      controlUI.title = 'Chat';
      controlDiv.appendChild(controlUI);

      var controlTextinfo = document.createElement('span');
      controlTextinfo.className = "mapchattxt";
      controlTextinfo.innerHTML = '<i class="fa fa-comments-o" aria-hidden="true"></i> Chat';
      controlUI.appendChild(controlTextinfo);

      google.maps.event.addDomListener(controlUI, 'click', mapchat);

  }

  function filtersControl(controlDiv, map) {

      var controlUI = document.createElement('div');
      controlUI.className = "filtersbtn";
      controlUI.title = 'Settings';
      controlDiv.appendChild(controlUI);

      var controlTextinfo = document.createElement('span');
      controlTextinfo.className = "filterstxt";
      controlTextinfo.innerHTML = '<i class="fa fa-cog" aria-hidden="true"></i> Settings';
      controlUI.appendChild(controlTextinfo);

      google.maps.event.addDomListener(controlUI, 'click', filtersdrop);

  }

  function loadingControl(controlDiv, map) {


      var controlUI = document.createElement('div');
      controlUI.className = "loadingbtn";
      controlUI.title = 'Loading Locations';
      controlDiv.appendChild(controlUI);

      var controlText = document.createElement('img');
        controlText.className = "spinner";
        controlText.src = "https://www.pokemongomap.info/images/pokeload.png";
        controlUI.appendChild(controlText);

        var controlTextinfo = document.createElement('span');
        controlTextinfo.className = "spinnertxt";
        controlTextinfo.innerHTML = 'Loading..';
      controlUI.appendChild(controlTextinfo);
  }

  function GeolocationControl(controlDiv, map) {
      var controlUI = document.createElement('div');
      controlUI.className = "gmapbtn";
      controlUI.title = 'Goto My Location';
      controlDiv.appendChild(controlUI);

      var controlText = document.createElement('i');
        controlText.className = "fa fa-crosshairs";
        controlText.setAttribute('aria-hidden', 'true');
        controlUI.appendChild(controlText);

      google.maps.event.addDomListener(controlUI, 'click', geolocate);
  }


  var browser = {};
  browser.hasTouchEvents = function() {
    try {
      document.createEvent( 'TouchEvent' );
      return true;
    }
      catch( e ) {
       return false;
    }
  };


function updatestatus(status,percent,ended) {

  if (status == "5") {
    $('.updatestatushold').show();
    $('.updatetxt').html("Checking Request");
    $('.updatebtn').width(128);
    $('.spinnerupd').attr('src','https://www.pokemongomap.info/images/pokeicooff.png');
    $('.updatebtn').css('right', '64px');
  }

  if (status == "0") {
    $('.updatestatushold').show();
    $('.updatetxt').html("Request In Queue");
    $('.updatebtn').width(127);
    $('.spinnerupd').attr('src','https://www.pokemongomap.info/images/pokeicooff.png');
    $('.updatebtn').css('right', '63px');
  }

  if (status == "1") {
    $('.updatestatushold').show();
    if (percent == "0") {
      $('.updatetxt').html("Starting Update");
      $('.updatebtn').width(122);
      $('.spinnerupd').attr('src','https://www.pokemongomap.info/images/pokeicomem.png');
      $('.updatebtn').css('right', '61px');
    }
    else {
      $('.updatetxt').html("Updating "+percent+"%");
      $('.spinnerupd').attr('src','https://www.pokemongomap.info/images/pokeico.png');
      if (percent < 10) {
      $('.updatebtn').width(107);
      $('.updatebtn').css('right', '54px');
      }
      else {
        if (percent < 100) {
        $('.updatebtn').width(111);
        $('.updatebtn').css('right', '55px');
        }
      }
      if (percent == "100") {
      $('.updatebtn').width(117);
      $('.updatebtn').css('right', '58px');
      }
    }
  }

  if (status == "2" || ended == "1") {
    $('.updatetxt').html("Update Completed");
    $('.updatebtn').width(134);
    $('.updatestatushold').stop(true,true).show().delay(12000).fadeOut(800);
    $('.spinnerupd').attr('src','https://www.pokemongomap.info/images/pokeicofin.png');
    $('.updatebtn').css('right', '67px');
  }


  if (ended == "2") {
    $('.updatestatushold').stop(true,true).show().fadeOut(800);
  }


}

function callgeo(checkinp) {

  var bounds = map.getBounds();
  var southWest = bounds.getSouthWest();
  var northEast = bounds.getNorthEast();


  $.ajax({

        url: 'https://www.pokemongomap.info/includes/geocode.php',
        cache: false,
        data: {
            'searchloc': checkinp,
            'fromlat': southWest.lat(),
            'tolat': northEast.lat(),
            'fromlng': southWest.lng(),
            'tolng': northEast.lng()
        },

        dataType: 'json',
        type: 'POST',
        async: true,
        success: function (data) {

        if (data) {

          if (data.success == "1")
          {

          if (data.lat != null && data.lat != "" && data.lng != null && data.lng != "") {
          var pos = new google.maps.LatLng(data.lat, data.lng);
          map.setCenter(pos);
          if (data.class == "boundary" ){map.setZoom(6); } else { if ( data.type == "continent"){map.setZoom(3); } else { map.setZoom(15); } }
        }
        else {
          searchloc("","","","Sorry - no locations were found",checkinp);
        }

        if (scanrequestmoveblock == "1") {
          $('#mousescannew').hide();
        }

        }
        else {
          if (data.spam == "1")
          {
          searchloc("","","","Spam Error - Try again in "+data.spamtime+" seconds",checkinp);
          }
          else {
            if (data.onesec == "1")
            {
            if (callgeocount < 4) {
            callgeocount++;
            setTimeout(function() { callgeo(checkinp); }, 1050);
            }
            else {
              searchloc("","","","Sorry - too many requests right now!",checkinp);
            }
            }
            else {
              searchloc("","","","Error - Try again later",checkinp);
            }
          }

        }

        }

        }
    });

}




function showsearchresults(results,searchinp,mode) {

var makesresults = "";
if (mode == "1") {
makesresults += "PokeStops matching '<b>"+searchinp+"</b>'<br><br>";
}
if (mode == "2") {
makesresults += "Gyms matching '<b>"+searchinp+"</b>'<br><br>";
}

$.each(results, function( index, value ) {
searchresult_array[index] = {};
searchresult_array[index][0] = value.id;
searchresult_array[index][1] = value.lat;
searchresult_array[index][2] = value.lng;
makesresults += "<div class='searchresult' data-index='"+index+"'><div class='searchresult_image' style='background-image: url("+value.image+")'></div><div class='searchresult_title'><span>"+value.address+"</span></div><div style='clear:both'></div></div>";
});

    var storejc = $.alert({
    title: 'Search Results',
    content: makesresults,
    icon: 'fa fa-search',
    backgroundDismiss: true,
    confirmButton: 'Close',
    closeIcon: true,
    closeIconClass: 'fa fa-close',
    confirm: function(){
    },
    cancel: function(){
    },
    onOpen: function(){

      $( ".searchresult" ).click(function(e) {
      var getindex =  $(this).attr("data-index");
      global_getresult_id = searchresult_array[getindex][0];
      global_getresult_lat = Number(searchresult_array[getindex][1]);
      global_getresult_lng = Number(searchresult_array[getindex][2]);

      var pos = new google.maps.LatLng(global_getresult_lat/1e6, global_getresult_lng/1e6);
      map.setCenter(pos);
      map.setZoom(17);

      storejc.close();

      if (scanrequestmoveblock == "1") {
        $('#mousescannew').hide();
      }

      return false;
      });

    }
    });

}



function callpsearch(checkinp) {

  var checkcenter = map.getCenter();
  global_tlat = checkcenter.lat();
  global_tlng = checkcenter.lng();

  $.ajax({

        url: 'https://www.pokemongomap.info/includes/locsearch.php',
        cache: false,
        data: {
            'searchloc': checkinp,
            'mode': '1',
            'tlat': global_tlat,
            'tlng': global_tlng
        },

        dataType: 'json',
        type: 'POST',
        async: true,
        success: function (data) {

        if (data) {

          if (data.success == "1")
          {

        showsearchresults(data.items,checkinp,1);

        }
        else {
          if (data.spam == "1")
          {
          searchloc("","","","","",checkinp,"","Spam Error - Try again in "+data.spamtime+" seconds","","2");
          }
          else {
          searchloc("","","","","",checkinp,"","Sorry - no pokestops were found","","2");
          }

        }

        }

        }
    });

}



function callgsearch(checkinp) {

  var checkcenter = map.getCenter();
  global_tlat = checkcenter.lat();
  global_tlng = checkcenter.lng();

  $.ajax({

        url: 'https://www.pokemongomap.info/includes/locsearch.php',
        cache: false,
        data: {
            'searchloc': checkinp,
            'mode': '2',
            'tlat': global_tlat,
            'tlng': global_tlng
        },

        dataType: 'json',
        type: 'POST',
        async: true,
        success: function (data) {

        if (data) {

          if (data.success == "1")
          {

        showsearchresults(data.items,checkinp,2);

        }
        else {
          if (data.spam == "1")
          {
          searchloc("","","","","","",checkinp,"","Spam Error - Try again in "+data.spamtime+" seconds","3");
          }
          else {
          searchloc("","","","","","",checkinp,"","Sorry - no gyms were found","3");
          }

        }

        }

        }
    });

}





function farmtutorial() {

var makefarmcon = '<ul style="margin:0px; padding:0px; padding-left:13px; font-size:11px; color: #555;" type="disc"><li>All pokestops by default get colored white.</li><li>Pokestops with many other pokestops nearby become faint blue.</li><li>With some others nearby in spinning range they go deep blue.</li><li>With many others nearby in spinning range they become yellow.</li><li style="margin-top:7px;">Gyms by default are white.</li><li>Gyms with other gyms nearby go dark grey.</li></ul>';

  if (farmtutorialdone == "0") {
    farmtutorialdone = 1;
    $.alert({
  title: 'Farming Mode Information',
  content: makefarmcon,
  icon: 'fa fa-crosshairs',
  backgroundDismiss: true,
  closeIcon: true,
  closeIconClass: 'fa fa-close',
  confirm: function(){
  },
  cancel: function(){
  }
  });
  }
}



function beenalert() {

var makebeencon = 'Only signed in users can mark location visits';

    $.alert({
  title: 'Hide Visited Locations',
  content: makebeencon,
  icon: 'fa fa-cog',
  backgroundDismiss: true,
  closeIcon: true,
  closeIconClass: 'fa fa-close',
  confirm: function(){
  },
  cancel: function(){
  }
  });
}


function mappowers() {

  $.alert({
title: 'Map Powers',
content: 'Contribute your local gym ownership information and more!<br><br><span style="color:#d46060; font-weight:bold;">Sorry, this feature is not available in your area yet</span>',
icon: 'fa fa-bolt',
backgroundDismiss: true,
closeIcon: true,
closeIconClass: 'fa fa-close',
confirm: function(){
},
cancel: function(){
}
});

}

function searchloc(tempa,tempb,tempc,feedback,oldval,oldval2,oldval3,feedback2,feedback3,mode) {

  if (feedback == null) { feedback = "";}
  if (feedback2 == null) { feedback2 = "";}
  if (feedback3 == null) { feedback3 = "";}
  if (oldval == null) { oldval = "";}
  if (oldval2 == null) { oldval2 = "";}
  if (oldval3 == null) { oldval3 = "";}
  if (mode == null) { mode = 1;}

  var maketabshold = '<div class="settingstabs"><div class="settingtab" data-tab="tab1" data-tabraw="1">Address</div><div class="settingtab" data-tab="tab2" data-tabraw="2">PokeStops</div><div class="settingtab" data-tab="tab3" data-tabraw="3">Gyms</div></div>';

  var makesearchloc = '<div class="tabset tab1"><div class="searchcopy" style="margin-bottom: 4px; margin-top: 18px; text-align:left;"><a href="#" class="poploc" data-lat="34.019657" data-lng="-118.4875489">Santa Monica</a>&nbsp;|&nbsp;<a href="#" class="poploc" data-lat="40.7305991" data-lng="-73.9865811">New York</a>&nbsp;|&nbsp;<a href="#" class="poploc" data-lat="51.5073219" data-lng="-0.1276473">London</a>&nbsp;|&nbsp;<a href="#" class="poploc" data-lat="35.69781360770334" data-lng="139.73980664713804">Tokyo</a>&nbsp;|&nbsp;<a href="#" class="poploc" data-lat="-33.8548156" data-lng="151.2164539">Sydney</a></div><input type="text" autocomplete="on" placeholder="Address, city or country etc" id="searchlocinp" value="'+oldval+'" name="searchlocinp"><div class="searchcopy">Data &copy; OpenStreetMap Contributors</div><div class="searchfeedback" id="searchfeedback">'+feedback+'</div></div><div class="tabset tab2"><input type="text" autocomplete="on" placeholder="Exact pokestop name" id="searchlocinp2" value="'+oldval2+'" name="searchlocinp2"><div id="searchfeedback2" class="searchfeedback">'+feedback2+'</div></div><div class="tabset tab3"><input type="text" autocomplete="on" placeholder="Exact gym name" id="searchlocinp3" value="'+oldval3+'" name="searchlocinp3"><div id="searchfeedback3" class="searchfeedback">'+feedback3+'</div></div>';


    $.confirm({
  title: false,
  content: maketabshold+makesearchloc,
  icon: false,
  confirmButton: 'Search',
  cancelButton: false,
  backgroundDismiss: true,
  closeIcon: true,
  closeIconClass: 'fa fa-close',
  confirm: function(){
  var checkinp = $("#searchlocinp").val();
  var checkinp2 = $("#searchlocinp2").val();
  var checkinp3 = $("#searchlocinp3").val();
  checkinp = checkinp.trim();
  checkinp2 = checkinp2.trim();
  checkinp3 = checkinp3.trim();

  if (searchmode == "1") {

    if (checkinp != "") {
    callgeocount = 0;
    callgeo(checkinp);
    }
    else {
      searchloc("","","","Include an address, city or country name",checkinp,"","","","",1);
    }

  }


    if (searchmode == "2") {

      if (checkinp2 != "") {
      callpsearch(checkinp2);
      }
      else {
        searchloc("","","","","",checkinp2,"","Include a pokestop name","",2);
      }

    }


      if (searchmode == "3") {

        if (checkinp3 != "") {
        callgsearch(checkinp3);
        }
        else {
        searchloc("","","","","","",checkinp3,"","Include a gym name",3);
        }

      }




  },
  onOpen: function(){

    $(".tab"+mode).show();
    $(".settingtab[data-tab='tab"+mode+"']").addClass("settingtab-active");
    searchmode = mode;

    $( ".settingtab" ).click(function(e) {
    $(".tabset").hide();
    $('.searchfeedback').hide();
    searchmode = $(this).attr("data-tabraw");
    var getcurtab =  "."+$(this).attr("data-tab");
    $(getcurtab).show();
    $(".settingtab").removeClass("settingtab-active");
    $(this).addClass("settingtab-active");
    return false;
    });

    setTimeout(function() {

    if (feedback != "") {   $('#searchfeedback').show();}
    if (feedback2 != "") {   $('#searchfeedback2').show();}
    if (feedback3 != "") {   $('#searchfeedback3').show();}

    $('#searchlocinp').keypress(function(event){
  if(event.keyCode == 13){
    $('.jconfirm-box .buttons .btn-default').click();
  }
});

$('#searchlocinp2').keypress(function(event){
if(event.keyCode == 13){
$('.jconfirm-box .buttons .btn-default').click();
}
});

$('#searchlocinp3').keypress(function(event){
if(event.keyCode == 13){
$('.jconfirm-box .buttons .btn-default').click();
}
});

$( ".poploc" ).click(function(e) {
  var getlat = $(this).attr("data-lat");
  var getlng = $(this).attr("data-lng");
  var pos = new google.maps.LatLng(getlat, getlng);
  map.setCenter(pos);
  map.setZoom(15);
  if (scanrequestmoveblock == "1") {
    $('#mousescannew').hide();
  }
});

}, 400);
  }

});

}

function mapchat(e) {
  e.stopPropagation();
  e.preventDefault();
  chatmobile();
}

  function filtersdrop(opentab) {

  var makepokefilt = '<input class="filtcheck" id="pokecheck" type="checkbox" checked="checked"><label id="filtpoke" style="vertical-align: middle; cursor: pointer; font-weight:400;"></label>';
  var makegymfilt = '<input class="filtcheck" id="gymcheck" type="checkbox" checked="checked"><label id="filtgym" style="vertical-align: middle; cursor: pointer; font-weight:400;"></label>';

  var makeraidfilt = '<input class="filtcheck" id="raidcheck" type="checkbox" checked="checked"><label id="filtraid" style="vertical-align: middle; cursor: pointer; font-weight:400;"></label>';
  var makeraidlvlfilt = '<div class="raidlvlhold"><input class="filtcheck" id="raidlvl1check" type="checkbox" checked="checked"><label id="filtraidlvl1" style="vertical-align: middle; cursor: pointer; font-weight:400;">Lvl 1</label><input class="filtcheck" id="raidlvl2check" type="checkbox" checked="checked" style="margin-left:12px; margin-right:5px;"><label id="filtraidlvl2" style="vertical-align: middle; cursor: pointer; font-weight:400;">2</label><input class="filtcheck" id="raidlvl3check" type="checkbox" checked="checked" style="margin-left:12px; margin-right:5px;"><label id="filtraidlvl3" style="vertical-align: middle; cursor: pointer; font-weight:400;">3</label><input class="filtcheck" id="raidlvl4check" type="checkbox" checked="checked" style="margin-left:12px; margin-right:5px;"><label id="filtraidlvl4" style="vertical-align: middle; cursor: pointer; font-weight:400;">4</label><input class="filtcheck" id="raidlvl5check" type="checkbox" checked="checked" style="margin-left:12px; margin-right:5px;"><label id="filtraidlvl5" style="vertical-align: middle; cursor: pointer; font-weight:400;">5</label></div>';

  var makesponsorfilt = '<input class="filtcheck" id="sponsorcheck" type="checkbox" checked="checked"><label id="filtsponsor" style="vertical-align: middle; cursor: pointer; font-weight:400;"></label>';

  var makenestfilt = '<input class="filtcheck" id="nestcheck" type="checkbox" checked="checked"><label id="filtnest" style="vertical-align: middle; cursor: pointer; font-weight:400;"></label>';

  var makebeenfilt = '<input class="filtcheck" id="beencheck" type="checkbox" checked="checked"><label id="filtbeen" style="vertical-align: middle; cursor: pointer; font-weight:400;"></label>';



  var maketypefilt = '<label style="vertical-align: middle; font-weight:400; float: left; margin-right: 10px; margin-top: 6px; min-width: 60px;">Map Type</label><div class="select-style"><select name="maptype" id="maptypesetting"><option value="1">Roadmap</option><option value="2">Satellite</option><option value="3">Hybrid</option><option value="4">Terrain</option></select></div>';
  var makethemefilt = '<label style="vertical-align: middle; font-weight:400; float: left; margin-right: 10px; margin-top: 6px; min-width: 60px;">Theme</label><div class="select-style"><select name="maptheme" id="mapthemesetting"><option value="1">Light</option><option value="2">Dark (Beta)</option></select></div>';

  var makefarmfilt = '<input class="filtcheck" id="farmcheck" type="checkbox" checked="checked"><label id="farmtrack" style="vertical-align: middle; cursor: pointer; font-weight:400;"></label>';

  var maketrackfilt = '<input class="filtcheck" id="trackcheck" type="checkbox" checked="checked"><label id="filttrack" style="vertical-align: middle; cursor: pointer; font-weight:400;"></label>';

  var maketabshold = '<div class="settingstabs"><div class="settingtab" data-tab="tab1">Filters</div><div class="settingtab" data-tab="tab2">Options</div><div class="settingtab" data-tab="tab3">Visual</div></div>';

    $.confirm({
  title: false,
  content: maketabshold+'<div class="tabset tab1"><div class="filthold">'+makesponsorfilt+'</div><div class="filthold" style="margin-top: 5px;">'+makebeenfilt+'</div><div class="filthold" style="margin-top:15px;">'+makepokefilt+'</div><div class="filthold" style="margin-top: 5px;">'+makegymfilt+'</div><div class="filthold" style="margin-top: 5px;">'+makenestfilt+'</div><div class="filthold" style="margin-top: 15px;">'+makeraidfilt+'</div><div class="filthold" style="margin-top: 5px;">'+makeraidlvlfilt+'</div></div><div class="tabset tab2"><div class="filthold">'+makefarmfilt+'</div><div class="filthold" style="margin-top: 5px;">'+maketrackfilt+'</div></div><div class="tabset tab3"><div class="filthold">'+makethemefilt+'</div><div class="filthold" style="margin-top: 6px;">'+maketypefilt+'</div></div>',
  icon: false,
  confirmButton: 'Save',
  cancelButton: false,
  backgroundDismiss: false,
  closeIcon: false,
  confirm: function(){

    var checkmaptype = $('#maptypesetting').val();
    if (checkmaptype == "1") { map.setMapTypeId('roadmap'); filteroptionmaptype = 1; }
    if (checkmaptype == "2") { map.setMapTypeId('satellite'); filteroptionmaptype = 2;}
    if (checkmaptype == "3") { map.setMapTypeId('hybrid'); filteroptionmaptype = 3;}
    if (checkmaptype == "4") { map.setMapTypeId('terrain'); filteroptionmaptype = 4;}

    var checkmaptheme = $('#mapthemesetting').val();
    if (checkmaptheme == "1") { filteroptionmaptheme = 1; set_maptheme(1);}
    if (checkmaptheme == "2") { filteroptionmaptheme = 2; set_maptheme(2);}

    var checkp = $("#pokecheck").prop("checked");
    var checkg = $("#gymcheck").prop("checked");

    var checkraid = $("#raidcheck").prop("checked");
    var checknest = $("#nestcheck").prop("checked");
    var checksponsor = $("#sponsorcheck").prop("checked");

    var checkraidlvl1 = $("#raidlvl1check").prop("checked");
    var checkraidlvl2 = $("#raidlvl2check").prop("checked");
    var checkraidlvl3 = $("#raidlvl3check").prop("checked");
    var checkraidlvl4 = $("#raidlvl4check").prop("checked");
    var checkraidlvl5 = $("#raidlvl5check").prop("checked");

    var checkbeen = $("#beencheck").prop("checked");


    var checkt = $("#trackcheck").prop("checked");
    var checkf = $("#farmcheck").prop("checked");
    if (!checkp) { filteroptionpoke = "0"; } else { filteroptionpoke = "1"; }
    if (!checkg) { filteroptiongym = "0"; } else { filteroptiongym = "1"; }

    if (!checkraid) { filteroptionraid = "0"; } else { filteroptionraid = "1"; }
    if (!checknest) { filteroptionnest = "0"; } else { filteroptionnest = "1"; }
    if (!checksponsor) { filteroptionsponsor = "0"; } else { filteroptionsponsor = "1"; }

    if (!checkraidlvl1) { filteroptionraidlvl1 = "0"; } else { filteroptionraidlvl1 = "1"; }
    if (!checkraidlvl2) { filteroptionraidlvl2 = "0"; } else { filteroptionraidlvl2 = "1"; }
    if (!checkraidlvl3) { filteroptionraidlvl3 = "0"; } else { filteroptionraidlvl3 = "1"; }
    if (!checkraidlvl4) { filteroptionraidlvl4 = "0"; } else { filteroptionraidlvl4 = "1"; }
    if (!checkraidlvl5) { filteroptionraidlvl5 = "0"; } else { filteroptionraidlvl5 = "1"; }

    if (!checkbeen) { filteroptionbeen = "0"; } else { filteroptionbeen = "1"; }


    if (!checkf) { filteroptionfarm = "0"; } else { filteroptionfarm = "1"; }
    if (!checkt) {
      filteroptiontrack = "0";
      clearInterval(intervaltracking);
     } else {
      filteroptiontrack = "1";
      clearInterval(intervaltracking);
      trackingcount = 45;
      geolocate('5');
      intervaltracking = setInterval(function(){
      trackingcount = trackingcount -1;
      if (trackingcount < 1) {trackingcount = 45; geolocate('5');}
      },1000);
     }


    var makecookval = filteroptionpoke+"[##split##]"+filteroptiongym+"[##split##]"+filteroptionmaptype+"[##split##]"+filteroptiontrack+"[##split##]"+filteroptionfarm+"[##split##]"+filteroptionraid+"[##split##]"+filteroptionnest+"[##split##]"+filteroptionbeen+"[##split##]"+filteroptionraidlvl1+"[##split##]"+filteroptionraidlvl4+"[##split##]"+filteroptionraidlvl5+"[##split##]"+filteroptionsponsor+"[##split##]"+filteroptionmaptheme+"[##split##]"+filteroptionraidlvl2+"[##split##]"+filteroptionraidlvl3;
    Cookies.set('mapfilters', makecookval, { expires: 800 });
    showMarkers();
    $('#mousescannew').hide();
  },
  onOpen: function(){

if (opentab != "1" && opentab != "2" && opentab != "3") {
  $(".tab1").show();
  $(".settingtab[data-tab='tab1']").addClass("settingtab-active");
}
else {
if (opentab == "1") {
  $(".tab1").show();
  $(".settingtab[data-tab='tab1']").addClass("settingtab-active");
}

if (opentab == "2") {
  $(".tab2").show();
  $(".settingtab[data-tab='tab2']").addClass("settingtab-active");
}

if (opentab == "3") {
  $(".tab3").show();
  $(".settingtab[data-tab='tab3']").addClass("settingtab-active");
}
}

$( ".settingtab" ).click(function(e) {
$(".tabset").hide();
var getcurtab =  "."+$(this).attr("data-tab");
$(getcurtab).show();
$(".settingtab").removeClass("settingtab-active");
$(this).addClass("settingtab-active");
return false;
});

if (filteroptionpoke == "1") { $( "#filtpoke" ).html("Enable PokeStops"); $("#pokecheck").prop("checked", true); } else { $( "#filtpoke" ).html("Enable PokeStops"); $("#pokecheck").prop("checked", false); }
if (filteroptiongym == "1") { $( "#filtgym" ).html("Enable Gyms"); $("#gymcheck").prop("checked", true); } else { $( "#filtgym" ).html("Enable Gyms"); $("#gymcheck").prop("checked", false); }


if (filteroptionraid == "1") { $( "#filtraid" ).html("Enable Raids"); $("#raidcheck").prop("checked", true); $('.raidlvlhold').css('opacity', '1.0'); } else { $( "#filtraid" ).html("Enable Raids"); $("#raidcheck").prop("checked", false); $('.raidlvlhold').css('opacity', '0.4'); }
if (filteroptionnest == "1") { $( "#filtnest" ).html("Enable Nests <span style='font-size: 9px;position: relative;bottom: 2px; color:#167b82'>BETA</span>"); $("#nestcheck").prop("checked", true); } else { $( "#filtnest" ).html("Enable Nests <span style='font-size: 9px;position: relative;bottom: 2px; color:#167b82'>BETA</span>"); $("#nestcheck").prop("checked", false); }

if (filteroptionsponsor == "1") { $( "#filtsponsor" ).html("Sponsored Locations Only"); $("#sponsorcheck").prop("checked", true); } else { $( "#filtsponsor" ).html("Sponsored Locations Only"); $("#sponsorcheck").prop("checked", false); }


if (filteroptionraidlvl1 == "1") { $("#raidlvl1check").prop("checked", true); } else { $("#raidlvl1check").prop("checked", false); }
if (filteroptionraidlvl2 == "1") { $("#raidlvl2check").prop("checked", true); } else { $("#raidlvl2check").prop("checked", false); }
if (filteroptionraidlvl3 == "1") { $("#raidlvl3check").prop("checked", true); } else { $("#raidlvl3check").prop("checked", false); }
if (filteroptionraidlvl4 == "1") { $("#raidlvl4check").prop("checked", true); } else { $("#raidlvl4check").prop("checked", false); }
if (filteroptionraidlvl5 == "1") { $("#raidlvl5check").prop("checked", true); } else { $("#raidlvl5check").prop("checked", false); }

if (filteroptionbeen == "1") { $( "#filtbeen" ).html("Hide Visited Locations"); $("#beencheck").prop("checked", true); } else { $( "#filtbeen" ).html("Hide Visited Locations"); $("#beencheck").prop("checked", false); }


if (filteroptionfarm == "1") { $( "#farmtrack" ).html("Enable Farming Mode"); $("#farmcheck").prop("checked", true); } else { $( "#farmtrack" ).html("Enable Farming Mode"); $("#farmcheck").prop("checked", false); }

if (filteroptiontrack == "1") { $( "#filttrack" ).html("Enable GPS Tracking"); $("#trackcheck").prop("checked", true); } else { $( "#filttrack" ).html("Enable GPS Tracking"); $("#trackcheck").prop("checked", false); }

if (filteroptionmaptype == "1") { $('#maptypesetting option[value="1"]').prop('selected', true); }
if (filteroptionmaptype == "2") { $('#maptypesetting option[value="2"]').prop('selected', true); }
if (filteroptionmaptype == "3") { $('#maptypesetting option[value="3"]').prop('selected', true); }
if (filteroptionmaptype == "4") { $('#maptypesetting option[value="4"]').prop('selected', true); }

if (filteroptionmaptheme == "1") { $('#mapthemesetting option[value="1"]').prop('selected', true); }
if (filteroptionmaptheme == "2") { $('#mapthemesetting option[value="2"]').prop('selected', true); }


$( "#pokecheck" ).click(function(e) {
  var check = $("#pokecheck").prop("checked");
});

$( "#gymcheck" ).click(function(e) {
  var check = $("#gymcheck").prop("checked");
});


$( "#raidcheck" ).click(function(e) {
  var check = $("#raidcheck").prop("checked");
  if (!check) {
  $('.raidlvlhold').css('opacity', '0.4');
  }
  else {
  $('.raidlvlhold').css('opacity', '1.0');
  }
});


$( "#beencheck" ).click(function(e) {
if (systemui_logged != "1") {
 beenalert();
 return false;
}
else {
  var check = $("#beencheck").prop("checked");
}
});

$( "#nestcheck" ).click(function(e) {
  var check = $("#nestcheck").prop("checked");
});

$( "#sponsorcheck" ).click(function(e) {
  var check = $("#sponsorcheck").prop("checked");
});



$( "#trackcheck" ).click(function(e) {
  var check = $("#trackcheck").prop("checked");
});

$( "#farmcheck" ).click(function(e) {
  var check = $("#farmcheck").prop("checked");
  if (!check) {
  }
  else {
  farmtutorial();
  }
});

$( "#filtpoke" ).click(function(e) {
  var check = $("#pokecheck").prop("checked");
  if (check) {
  $("#pokecheck").prop("checked", false);
  }
  else {
  $("#pokecheck").prop("checked", true);
  }
  return false;
});

$( "#filtgym" ).click(function(e) {
  var check = $("#gymcheck").prop("checked");
  if (check) {
  $("#gymcheck").prop("checked", false);
  }
  else {
  $("#gymcheck").prop("checked", true);
  }
  return false;
});




$( "#filtraid" ).click(function(e) {
  var check = $("#raidcheck").prop("checked");
  if (check) {
  $("#raidcheck").prop("checked", false);
  $('.raidlvlhold').css('opacity', '0.4');
  }
  else {
  $("#raidcheck").prop("checked", true);
  $('.raidlvlhold').css('opacity', '1.0');
  }
  return false;
});


$( "#filtraidlvl1" ).click(function(e) {
  var check = $("#raidlvl1check").prop("checked");
  if (check) {
  $("#raidlvl1check").prop("checked", false);
  }
  else {
  $("#raidlvl1check").prop("checked", true);
  }
  return false;
});

$( "#filtraidlvl2" ).click(function(e) {
  var check = $("#raidlvl2check").prop("checked");
  if (check) {
  $("#raidlvl2check").prop("checked", false);
  }
  else {
  $("#raidlvl2check").prop("checked", true);
  }
  return false;
});

$( "#filtraidlvl3" ).click(function(e) {
  var check = $("#raidlvl3check").prop("checked");
  if (check) {
  $("#raidlvl3check").prop("checked", false);
  }
  else {
  $("#raidlvl3check").prop("checked", true);
  }
  return false;
});

$( "#filtraidlvl4" ).click(function(e) {
  var check = $("#raidlvl4check").prop("checked");
  if (check) {
  $("#raidlvl4check").prop("checked", false);
  }
  else {
  $("#raidlvl4check").prop("checked", true);
  }
  return false;
});

$( "#filtraidlvl5" ).click(function(e) {
  var check = $("#raidlvl5check").prop("checked");
  if (check) {
  $("#raidlvl5check").prop("checked", false);
  }
  else {
  $("#raidlvl5check").prop("checked", true);
  }
  return false;
});



$( "#filtbeen" ).click(function(e) {
  if (systemui_logged != "1") {
   beenalert();
  }
  else {
  var check = $("#beencheck").prop("checked");
  if (check) {
  $("#beencheck").prop("checked", false);
  }
  else {
  $("#beencheck").prop("checked", true);
  }
}
  return false;
});

$( "#filtnest" ).click(function(e) {
  var check = $("#nestcheck").prop("checked");
  if (check) {
  $("#nestcheck").prop("checked", false);
  }
  else {
  $("#nestcheck").prop("checked", true);
  }
  return false;
});


$( "#filtsponsor" ).click(function(e) {
  var check = $("#sponsorcheck").prop("checked");
  if (check) {
  $("#sponsorcheck").prop("checked", false);
  }
  else {
  $("#sponsorcheck").prop("checked", true);
  }
  return false;
});





$( "#filttrack" ).click(function(e) {
  var check = $("#trackcheck").prop("checked");
  if (check) {
  $("#trackcheck").prop("checked", false);
  }
  else {
  $("#trackcheck").prop("checked", true);
  }
  return false;
});

$( "#farmtrack" ).click(function(e) {
  var check = $("#farmcheck").prop("checked");
  if (check) {
  $("#farmcheck").prop("checked", false);
  }
  else {
  $("#farmcheck").prop("checked", true);
  farmtutorial();
  }
  return false;
});



}
});

  }

  function geolocate(type) {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function (position) {
            var pos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
            map.setCenter(pos);

            if (scanrequestmoveblock == "1") {
              $('#mousescannew').hide();
            }

            gps_store_active = 1;
            gps_store_lat = position.coords.latitude;
            gps_store_lng = position.coords.longitude;

            //if (type == "5") {map.setZoom(14);} else {map.setZoom(14);}
            $( "#topbarcontent" ).show();
            showMarkers();
        });
    }
}



    function bindInfoWindow(marker, map, infoWindow) {

      google.maps.event.addListener(marker, 'click', function(e) {
      if (scanrequestactive != "1") {
      if (this.nest == "1") {
        $.confirm({
      title: 'Pokemon Nest',
      content: this.gid+"<br><b>Note: This feature is still being developed</b><div style='margin-top:5px;'>Nest locations are accurate but the stated Pokemon may be from previous migrations</div>",
      icon: 'fa fa-map-marker',
      backgroundDismiss: true,
      confirmButton: false,
      cancelButton: "Close",
      closeIcon: true,
      closeIconClass: 'fa fa-close'
  });
      }
      else {
        infoboxopen(this.url,this.mid,this.poketitle, true, '0', this.confirm, this.gid);
      }
    }

      });

    marker.addListener('mouseover', function() {
     var iconinfo = marker.getIcon();
     iconinfo = iconinfo.url;
     var checkgid = marker.gid;
     var checkcluster = marker.cluster;
     var checkraidstatus = marker.raidstatus;
     var checkraidlevel = marker.raidlevel;
     if (iconinfo.indexOf('markerpoke') > -1){marker.setIcon(markericonroll);}
     if (iconinfo.indexOf('markernest') > -1){}
     if (iconinfo.indexOf('markerdel') > -1){marker.setIcon(markericondelroll);}
      if (iconinfo.indexOf('markerlink') > -1){marker.setIcon(markericonlinkroll);}
    if (iconinfo.indexOf('markerfav') > -1){marker.setIcon(markericonfavroll);}
    if (iconinfo.indexOf('markerfvgym') > -1){marker.setIcon(markericonfvgymroll);}

    if (checkgid == "1" || checkgid == "2" || checkgid == "3" || checkgid == "4") {
    if (checkgid == "1") { marker.setIcon(markerteam1roll); }
    if (checkgid == "2") { marker.setIcon(markerteam2roll); }
    if (checkgid == "3") { marker.setIcon(markerteam3roll); }
    if (checkgid == "4") { marker.setIcon(markerteam4roll); }

    if (checkraidstatus == "1" || checkraidstatus == "2") {
      if (checkgid == "1") { marker.setIcon(raidmarkerteam1roll); }
      if (checkgid == "2") { marker.setIcon(raidmarkerteam2roll); }
      if (checkgid == "3") { marker.setIcon(raidmarkerteam3roll); }
      if (checkgid == "4") { marker.setIcon(raidmarkerteam4roll); }
    }

  }
  else {
  if (iconinfo.indexOf('markergym') > -1){marker.setIcon(markericongymroll);}
  }

  if (checkcluster == "1") {
  if (iconinfo.indexOf('markerfarm') > -1){marker.setIcon(markericonfarmroll);}
  }

  if (checkcluster == "3") {
  if (iconinfo.indexOf('markerfarmelite') > -1){marker.setIcon(markericonfarmeliteroll);}
  }

  if (checkcluster == "4") {
  if (iconinfo.indexOf('markerfarmultra') > -1){marker.setIcon(markericonfarmultraroll);}
  }

  if (checkcluster == "5") {
  if (iconinfo.indexOf('markerfarmhot') > -1){marker.setIcon(markericonhotroll);}
  }

  if (checkcluster == "6") {
  if (iconinfo.indexOf('markergymhot') > -1){marker.setIcon(markergymhotroll);}
  }

  if (checkcluster == "2") {
  marker.setIcon(markerteam4roll);
  }

    });

    marker.addListener('mouseout', function() {
      var iconinfo = marker.getIcon();
      iconinfo = iconinfo.url;
      var checkgid = marker.gid;
      var checkcluster = marker.cluster;
      var checkraidstatus = marker.raidstatus;
      var checkraidlevel = marker.raidlevel;
      if (iconinfo.indexOf('markerpoke') > -1){marker.setIcon(markericon);}
      if (iconinfo.indexOf('markernest') > -1){}
      if (iconinfo.indexOf('markerdel') > -1){marker.setIcon(markericondel);}
        if (iconinfo.indexOf('markerlink') > -1){marker.setIcon(markericonlink);}
      if (iconinfo.indexOf('markerfav') > -1){marker.setIcon(markericonfav);}
      if (iconinfo.indexOf('markerfvgym') > -1){marker.setIcon(markericonfvgym);}

      if (checkgid == "1" || checkgid == "2" || checkgid == "3" || checkgid == "4") {
      if (checkgid == "1") { marker.setIcon(markerteam1); }
      if (checkgid == "2") { marker.setIcon(markerteam2); }
      if (checkgid == "3") { marker.setIcon(markerteam3); }
      if (checkgid == "4") { marker.setIcon(markerteam4); }

      if (checkraidstatus == "1" || checkraidstatus == "2") {

        if (checkraidlevel == "" || checkraidlevel == "0") {
          if (checkgid == "1") { marker.setIcon(raidmarkerteam1); }
          if (checkgid == "2") { marker.setIcon(raidmarkerteam2); }
          if (checkgid == "3") { marker.setIcon(raidmarkerteam3); }
          if (checkgid == "4") { marker.setIcon(raidmarkerteam4); }
        }
        else {
          var makeraidaddword = "_"+checkraidlevel;
          if (checkgid == "1") { marker.setIcon(window["raidmarkerteam1" + makeraidaddword]); }
          if (checkgid == "2") { marker.setIcon(window["raidmarkerteam2" + makeraidaddword]); }
          if (checkgid == "3") { marker.setIcon(window["raidmarkerteam3" + makeraidaddword]); }
          if (checkgid == "4") { marker.setIcon(window["raidmarkerteam4" + makeraidaddword]); }
        }
      }


    }
    else {
    if (iconinfo.indexOf('markergym') > -1){marker.setIcon(markericongym);}
    }

    if (checkcluster == "1") {
    if (iconinfo.indexOf('markerfarm') > -1){marker.setIcon(markericonfarm);}
    }

    if (checkcluster == "3") {
    if (iconinfo.indexOf('markerfarmelite') > -1){marker.setIcon(markericonfarmelite);}
    }

    if (checkcluster == "4") {
    if (iconinfo.indexOf('markerfarmultra') > -1){marker.setIcon(markericonfarmultra);}
    }

    if (checkcluster == "5") {
    if (iconinfo.indexOf('markerfarmhot') > -1){marker.setIcon(markericonhot);}
    }

    if (checkcluster == "6") {
    if (iconinfo.indexOf('markergymhot') > -1){marker.setIcon(markergymhot);}
    }


    if (checkcluster == "2") {
    marker.setIcon(markerteam4);
    }

    });

    }



function showRequest(position, map) {

  var marker = new google.maps.Marker({
    map: map,
    position: position,
    draggable: false,
    icon:markericonscan,
    title: "Region Update Location"
  });
  markers.push(marker);

}

function checkcheck() {
if ($('.includecheck input:checked').length < 1) {
$("#searchgym").prop("checked", true);
$('#includewarning').stop(true,true).fadeIn(1, function() { $(this).delay(4000).fadeOut(400); });
}
}

    function placeMarker(position, map) {

      var marker = new google.maps.Marker({
        map: map,
        position: position,
        draggable: false,
        icon:markericonscan,
        title: "Region Update Location"
      });

      marker.setZIndex(google.maps.Marker.MAX_ZINDEX + 1);

      markers.push(marker);


                $('#mousescannew').css({
                   left:  saveepagex-(mousescanx),
                   top:   saveepagey-(mousescany)
                });

      $('#mousescannew').show();

      var getpostlat = marker.getPosition().lat();
      var getpostlng = marker.getPosition().lng();

      setTimeout(function() {

      $.confirm({
    title: 'Region Update',
    content: '<div>Now select the location types to include:</div><div style="margin-top:9px;" class="includecheck"><input class="filtcheck" id="searchgym" type="checkbox" checked="checked"><label id="searchgymlabel" style="vertical-align: middle; cursor: pointer; font-weight:400;">Gyms / Raids</label><input class="filtcheck" id="searchpokestop" type="checkbox" style="margin-left:12px;"><label id="searchpokestoplabel" style="vertical-align: middle; cursor: pointer; font-weight:400;">PokeStops / Lures</label></div><div style="margin-top:10px; font-weight:bold; font-size: 12px; color: #d46060; display:none;" id="includewarning">At least one type must be selected</div><div style="height:3px;"></div>',
    icon: 'fa fa-map-marker',
    backgroundDismiss: true,
    confirmButton: 'Confirm Request',
    cancelButton: "Cancel",
    closeIcon: true,
    closeIconClass: 'fa fa-close',
    confirm: function(){

      var checkspoke = $("#searchpokestop").prop("checked");
      var checksgym = $("#searchgym").prop("checked");
      if (checkspoke) { searchincludepoke = 1; }
      if (!checksgym) { searchincludegym = 0; }

    scanrequestactive = 0;
    map.setClickableIcons(true);
    scanrequestpost(getpostlat,getpostlng,searchincludepoke,searchincludegym);
    for( i = 0; i < markers.length; i++ )
    {
      markers[i].setClickable (true);
    }
    },
    cancel: function(){
    scanrequestactive = 0;
    scanrequestmoveblock = 0;
    map.setClickableIcons(true);
    $('#mousescannew').hide();
    showMarkers();
  },
  onOpen: function(){

    $( "#searchgymlabel" ).click(function(e) {
      var check = $("#searchgym").prop("checked");
      if (check) {
      $("#searchgym").prop("checked", false);
      }
      else {
      $("#searchgym").prop("checked", true);
      }
      checkcheck();
      return false;
    });

    $( "#searchpokestoplabel" ).click(function(e) {
      var check = $("#searchpokestop").prop("checked");
      if (check) {
      $("#searchpokestop").prop("checked", false);
      }
      else {
      $("#searchpokestop").prop("checked", true);
      }
      checkcheck();
      return false;
    });


    $('#searchpokestop').change(function() {
    checkcheck();
   });

   $('#searchgym').change(function() {
    checkcheck();
  });

  }
});
}, 1600);


    }


function scanrequestgoto(lat,lng) {
var coords = new google.maps.LatLng(lat, lng);
map.setCenter(coords);
map.setZoom(15);

if (scanrequestmoveblock == "1") {
  $('#mousescannew').hide();
}

reqshowactive = 1;
reqshowcoords = coords;
}


function requestcheck() {

  jQuery.ajax({
    url: "https://www.pokemongomap.info/includes/requestcheck.php",
    data: { thepubkey:global_updatekey},
    type: "POST",
    async: true,
    dataType: "json",
    success:function(data){

      requestloopsavelat = data.returnlat;
      requestloopsavelng = data.returnlng;

      var get_noticreated = data.timecomplete;

      var get_notinumnew = data.returnnotinumnew;
      var get_notinumnew_gym = data.returnnotinumnew_gym;
      var get_notinum = data.returnnotinum;
      var get_notinum_gym = data.returnnotinum_gym;

      var getnotinumnew_total = Number(get_notinumnew)+Number(get_notinumnew_gym);
      var earnbonus = data.earnbonus;

      updatestatus(data.status,data.percent,'0');

      if (data.completed == "1")
      {

      Cookies.set('updatetoken', '0', { expires: 800 });
      updatetoken = 0;

      if (data.igym == "1" && data.ipoke == "1") {
        var makecontmsg = "We found <b>"+get_notinumnew_gym+"</b> new gyms and <b>"+get_notinumnew+"</b> new pokestops!<br><br>In total there are <b>"+get_notinum_gym+"</b> gyms and <b>"+get_notinum+"</b> pokestops in that area.";
      }
      else {
        if (data.igym == "0") {
          var makecontmsg = "We found <b>"+get_notinumnew+"</b> new pokestops!<br><br>In total there are <b>"+get_notinum+"</b> pokestops in that area.";
        }
        else {
          if (data.ipoke == "0") {
            var makecontmsg = "We found <b>"+get_notinumnew_gym+"</b> new gyms!<br><br>In total there are <b>"+get_notinum_gym+"</b> gyms in that area.";
          }
        }
      }

      var contmsgbonus = "<br><br><span style='color:#167b82;'>Discoveries have earned you "+earnbonus+" RP!</span>";
      if (getnotinumnew_total == "" || getnotinumnew_total == "0") {
        if (get_notinum_gym == "0" && get_notinum == "0") {
        makecontmsg = "No existing or new locations were found. If you think this is an error then feel free to request another region update.<br><br><span style='color:#167b82;'>We will be alerted if there are suddenly many empty requests.</span>";
        }
        else {
          if (data.igym == "1" && data.ipoke == "1") {
            makecontmsg = "No new locations were found.<br><br>In total there are <b>"+get_notinum_gym+"</b> gyms and <b>"+get_notinum+"</b> pokestops in that area.";
          }
          else {
            if (data.igym == "0") {
              makecontmsg = "No new locations were found.<br><br>In total there are <b>"+get_notinum+"</b> pokestops in that area.";
            }
            else {
              if (data.ipoke == "0") {
                makecontmsg = "No new locations were found.<br><br>In total there are <b>"+get_notinum_gym+"</b> gyms in that area.";
              }
            }
          }
        }
        contmsgbonus = "<br><br><span style='color:#167b82;'>Earn Bonus RP for finding undiscovered locations!</span>";
      }
      if (systemui_logged != "1") {
        contmsgbonus = "<br><br><span style='color:#167b82;'>Login to earn RP for finding undiscovered locations!</span>";
      }


        $.confirm({
      title: 'Region Update Completed',
      content: makecontmsg+contmsgbonus,
      icon: 'fa fa-map-marker',
      backgroundDismiss: true,
      confirmButton: 'Goto Area',
      cancelButton: 'Okay',
      closeIcon: true,
      closeIconClass: 'fa fa-close',
      confirm: function(){
      scanrequestgoto(requestloopsavelat,requestloopsavelng);
      if (systemui_logged == "1") {
      setlevel(data.new_rep,data.new_level,data.new_maxpoints);
      }
      },
      cancel: function(){
        if (systemui_logged == "1") {
        setlevel(data.new_rep,data.new_level,data.new_maxpoints);
      }
    }
      });

      updatestatus(data.status,data.percent,'1');
      showMarkers();
      $('#mousescannew').hide();

      }
      else {

        if (data.completed == "2")
        {

          Cookies.set('updatetoken', '0', { expires: 800 });
          updatetoken = 0;
          $('.updatestatushold').stop(true,true).show().fadeOut(800);

        }
        else {

          if (requestloopcount > 130) {

          updatestatus(data.status,data.percent,'2');

            $.confirm({
          title: 'Region Update Information',
          content: 'Sorry, there was a delay with your request. It will still be completed but no more information will appear here<br><br>Thanks!',
          icon: 'fa fa-map-marker',
          backgroundDismiss: true,
          confirmButton: 'Goto Area',
          cancelButton: 'Okay',
          closeIcon: true,
          closeIconClass: 'fa fa-close',
          confirm: function(){
          scanrequestgoto(requestloopsavelat,requestloopsavelng);
          }
          });

          }
          else {
          requestloop();
          }

        }

      }
    },
    error:function (){}
    });

}



function requestloop() {
  if (requestlooptimer != "notset" ) {
  clearTimeout(requestlooptimer);
  }
  requestlooptimer = setTimeout(function() {
    requestloopcount++;
    requestcheck();
  }, 10000);
}


    function scanrequestpost(lat,lng,searchipoke,searchigym) {

      jQuery.ajax({
        url: "https://www.pokemongomap.info/includes/req27irpq.php",
        data: { thelat:lat, thelng:lng, searchgym:searchigym, searchpoke:searchipoke, searchsize: searchregsize},
        type: "POST",
        async: true,
        dataType: "json",
        success:function(data){

          if (data.complete == "1")
          {

            requestloopcount = 0;
            global_updatekey = data.pubkey;
            Cookies.set('updatetoken', global_updatekey, { expires: 800 });

            requestloop();
            updatestatus(0,0,0);

            requestloopsavelat = lat;
            requestloopsavelng = lng;

            var makewarningmsg = "";
            var makequemsg = "The current update time is about "+data.que+" minutes. An information window with statistics will display on completion.";

            var makemaintmsg = "";

            if (Number(data.que) > 5) {
              makewarningmsg = "<span style='font-weight:bold; color:#d46060'>Heavy load! Update time is longer than usual.</span><br><br>";
            }

            var tempdownmsg = "<span style='font-weight:bold; color:#d46060'>Currently investigating issues. Updates may fail or some locations may be missed.</span><br><br>";
            tempdownmsg = "";

            if (data.maintstatus == "1") {
            makemaintmsg = "<br><br><span style='font-weight:bold; color:#d46060'>We are performing maintenance - some locations may be missed. Updates will be back to normal soon.</span>";
            }

            if (systemui_logged == "1") {
              $.alert({
            title: "Request Received",
            content: tempdownmsg+makewarningmsg+makequemsg+makemaintmsg+"<br><br><span style='color:#167b82;'>Earned 25 RP!</span>",
            icon: "fa fa-map-marker",
            backgroundDismiss: true,
            closeIcon: true,
            closeIconClass: "fa fa-close",
            confirm: function(){
                setlevel(data.new_rep,data.new_level,data.new_maxpoints);
            },
            cancel: function(){
              setlevel(data.new_rep,data.new_level,data.new_maxpoints);
          }
        });
            }
            else {
              $.alert({
            title: "Request Received",
            content: tempdownmsg+makewarningmsg+makequemsg+makemaintmsg+"<br><br><span style='color:#167b82;'>Login next time to earn RP and get higher priority.</span>",
            icon: "fa fa-map-marker",
            backgroundDismiss: true,
            closeIcon: true,
            closeIconClass: "fa fa-close"
          });
            }


          }
          else
          {

            $.alert({
          title: "Request Failed",
          content: data.feedback,
          icon: "fa fa-map-marker",
          backgroundDismiss: true,
          closeIcon: true,
          closeIconClass: "fa fa-close"
      });

      $('#mousescannew').hide();


          }
        },
        error:function (){}
        });

    }


    function changeregsize(newsize) {
      if (newsize == "1") {$("#mousescannew").css("transform", "scale(0.77)");}
      if (newsize == "2") {$("#mousescannew").css("transform", "scale(0.43)");}
      if (newsize == "3") {$("#mousescannew").css("transform", "scale(0.22)");}
      searchregsize = newsize;
    }


    function scanrequest() {
      scanrequestmoveblock = 0;

      $('#mapdimmer').hide();
      infoboxopen('/', 'Loading', 'Loading', true);

      $("#mousescannew").css("transform", "scale(0.22)");
      searchregsize = 3;

      
      var touchword = "Click";
      if (browser.hasTouchEvents()) {
      touchword = "Touch";
      }

      
        var tempmsg = "";
        //tempmsg = "<div style='font-weight:bold; color:#d46060; margin-bottom:13px'>All map sites are currently unstable due to third party changes. Some locations may be missed.</div>";
        //tempmsg = "<div style='font-weight:bold; color:#d46060; margin-bottom:13px'>We are performing maintenance - some locations may be missed. Updates will be back to normal soon.</div>";
        //tempmsg = "";

        var scantext = tempmsg+"<div>"+touchword+" the map to set the center point. Locations within the red area will be updated and any new ones added.</div><div style='margin-top:10px;'><label style='vertical-align: middle; font-weight:400; float: left; margin-right: 10px; margin-top: 6px;'>Region Size</label><div class='select-style'><select name='regsize' id='regupdatesize'><option value='3' selected>Small (Fastest)</option><option value='2'>Medium</option><option value='1'>Large</option></select></div></div><div style='margin-top:13px;'><span style='color:#167b82;'>Note: Raids only exist between 7am and 10pm local time</span></div>";

          $.confirm({
        title: 'Region Update',
        content: scantext,
        icon: 'fa fa-map-marker',
        backgroundDismiss: false,
        confirmButton: 'Okay',
        cancelButton: "Cancel",
        closeIcon: true,
        closeIconClass: 'fa fa-close',
        confirm: function(){

          for( i = 0; i < markers.length; i++ )
          {
            markers[i].setClickable (false);
          }


        scanrequestactive = 1;

        map.setClickableIcons(false);
        if (!browser.hasTouchEvents()) {
          $('#mousescannew').show();
        }
        window.controller.close();
        chatvisible = 0;
        $( "#topbarcontent" ).show();
        },
        cancel: function(){

      },
      onOpen: function(){
        $('#regupdatesize').on('change', function() {
        if (this.value == "1") { changeregsize(1); }
        if (this.value == "2") { changeregsize(2); }
        if (this.value == "3") { changeregsize(3); }
      });
      }
    });


      
  
    }


    function clientlocation(position) {
    if (checksavestatus == "0") {
    var coords = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
    map.setCenter(coords);

    if (scanrequestmoveblock == "1") {
      $('#mousescannew').hide();
    }

    }
    }

    function triggerspark() {
      $('#sparkfx').fadeIn(400, function() { $(this).delay(300).fadeOut(300); });
        $('#sparkfxsmall').fadeIn(400, function() { $(this).delay(300).fadeOut(300); });
    }

    function setlevel(newpoints,newlevel,maxpoints,nospark) {
          if (systemui_logged == "1") {
      var makeprevlevel = newlevel-1;
      if (makeprevlevel > 1) {
      var getlastlvlmaxp = (makeprevlevel*makeprevlevel)*100;
      var makepercentbar = (newpoints-getlastlvlmaxp)/(maxpoints-getlastlvlmaxp);
      }
      else {
      var makepercentbar = newpoints/maxpoints;
      }
      $('#userlevel').html("Level "+newlevel);
      var getxpwsmall = $('#topuserxp').width();
      var getxpw = $('#userxp').width();
      var newxpbarw = getxpw*makepercentbar;
      var newxpbarsmallw = getxpwsmall*makepercentbar;
      $('#userxpbar').width(newxpbarw);
      $('#topuserxpbar').width(newxpbarw);
      if (nospark != "1") {
      triggerspark();
    }
  }
    }


    function removeMarkersZoom() {
    trackingcount = 45;
    timeouttime = 1800;
    clearTimeout(mtimer);
    clearTimeout(loadtimer);
      for (var i = 0; i < markers.length; i++) {
          markers[i].setMap(null);
      }
      markers = [];

      if (scanrequestmoveblock == "1") {
        $('#mousescannew').hide();
      }
    }

    function removeMarkersDrag() {
    trackingcount = 45;
    timeouttime = 1600;
    clearTimeout(mtimer);
    clearTimeout(loadtimer);
      for (var i = 0; i < markers.length; i++) {
          markers[i].setMap(null);
      }
      markers = [];
      if (scanrequestmoveblock == "1") {
        $('#mousescannew').hide();
      }
    }



    function fixgmapui() {
    if (sessionreloadmsg_active != "1") {
    $('.gm-fullscreen-control').parent().css('margin-right', '10px');
    $('.gm-fullscreen-control').parent().css('cursor', 'pointer');
    $('.gm-fullscreen-control').parent().removeClass( "fullfix" ).addClass( "fullfix" );
    }
    }



    function showMarkers() {

    fixgmapui();

    clearTimeout(mtimer);
    clearTimeout(loadtimer);
    clearInterval(timeintervalmap);
    if(typeof xhrsave !== "undefined")
    {
    xhrsave.abort();
    }


    mtimer = setTimeout(function() {

    $('.spinnertxt').html("Loading..");
    $('.loadingbtn').width(91);

    loadtimer = setTimeout(function() { $('.loadingbtn').show(); }, 1700);


    var checkzoom = map.getZoom();
    var checkcenter = map.getCenter();
    var checkcenterx = checkcenter.lat();
    var checkcentery = checkcenter.lng();
    var makecookval = checkzoom+"[##split##]"+checkcenterx+"[##split##]"+checkcentery;
    Cookies.set('latlngzoom', makecookval, { expires: 800 });

    for (var i = 0; i < markers.length; i++) {
        markers[i].setMap(null);
    }
    markers = [];
    var bounds = map.getBounds();
    var southWest = bounds.getSouthWest();
    var northEast = bounds.getNorthEast();


    var getmapratio = 156543.03392 * Math.cos(checkcenterx * Math.PI / 180) / Math.pow(2, checkzoom)

    var getratioscale = 25/getmapratio;
    var scaniconw = 536.76*getratioscale;
    var scaniconh = 464.94*getratioscale;
    var scaniconx = 268.38*getratioscale;
    var scanicony = 232.47*getratioscale;

    mousescanx = scaniconx;
    mousescany = scanicony;

    $("#mousescannew").css("width", scaniconw+"px");
    $("#mousescannew").css("height", scaniconh+"px");

      $('#mousescannew').css({
         left:  saveepagex-(mousescanx),
         top:   saveepagey-(mousescany)
      });



  xhrsave = $.ajax({

        url: 'https://www.pokemongomap.info/includes/it55nmsq9.php',
        cache: false,
        data: {
            'fromlat': southWest.lat(),
            'tolat': northEast.lat(),
            'fromlng': southWest.lng(),
            'tolng': northEast.lng(),
            'fpoke': filteroptionpoke,
            'fgym': filteroptiongym,
            'farm': filteroptionfarm,
            'nests': filteroptionnest,
            'raids': filteroptionraid,
            'sponsor': filteroptionsponsor
        },

        type: 'POST',

        async: true,
        timeout: 80000,
        error: function(){
          sessionreloadmsg_active = 1;
          $('.spinnertxt').html("<span style='color:#d46060;'>Error - Try zooming in closer</span>");
          $('.loadingbtn').show();
          $('.loadingbtn').width(193);
      },
        success: function (data) {
          if (activityspamcountfirsthit == "1") {
            activityspamcountfirsthit = "0";
          }
          else {
            activityspamcount = 0;
          }

          clearTimeout(loadtimer);
          data = JSON.parse(data);
            if (data) {
              if (typeof data.spam != "undefined" && data.spam == "1"){
              var getspamtime = data.spamtime;
              var getspamtype = data.spamtype;

              if (getspamtype == "2")
              {
                sessionreloadmsg_active = 1;
                $('.spinnertxt').html("<span style='color:#d46060;'>Session Expired - Reload to continue</span>");
                $('.loadingbtn').show();
                $('.searchbtn').hide();
                $('.mapchatbtn').hide();
                $('.filtersbtn').hide();
                $('.fullfix').css("visibility", "hidden");
                $('.gm-fullscreen-control').css("visibility", "hidden");
                $('.loadingbtn').width(230);
              }
              else {

              if (getspamtime < 10) {getspamtime = 10;}
              $('.spinnertxt').html("<span style='color:#d46060;'>Spam Error - Retrying in <span id='mapspamtime'>"+getspamtime+"</span> sec</span>");
              $('.loadingbtn').show();
              $('.loadingbtn').width(208);

              var spamcount = getspamtime;
              timeintervalmap = setInterval(function(){
                spamcount = spamcount - 1;
                $("#mapspamtime").html(spamcount);
                if(spamcount<=0){
                  clearInterval(timeintervalmap);
                  showMarkers();
                }
              },1000);

            }

              }
              else {

              $('.loadingbtn').stop(true,true).hide();
              setTimeout(function() { $('.loadingbtn').stop(true,true).hide(); }, 300);
              setTimeout(function() { $('.loadingbtn').stop(true,true).hide(); }, 1750);

              var zoom = map.getZoom();

              var selectmarker = "";
              var countmark = 0;
              markerseohtml = "";
              var makeseomin = Math.floor(Math.random() * 30);
              var makeseomax = 30+Math.floor(Math.random() * 30);


              var getmax_clusterrating = 0;
              var getmax_clusterratingclose = 0;

              if (filteroptionfarm == "1") {
                getmax_clusterrating = data['maxclusters'];
                getmax_clusterratingclose = data['maxclustersclose'];
              }

              var mcluster = 0;
              var makezindex = 0;

              var clickopt = true;

              resultmarkeractive = 0;
              savedtitlemake = "";

                $.each(data, function(k, item) {

                  mcluster = 0;
                  makezindex = 0;

                  if (scanrequestactive == 1) { clickopt = false; } else { clickopt = true; }

                  if (k == "maxclusters" || k == "maxclustersclose") {} else {

                  eval((function(){
      var p='abcdefghijklmnopqrstuvwxyz';var s=[72,90,85,94,87,82,71,88,75,80,65,76,81,66,79,70,60,86,74,89];var e=[];for(var d=0;d<s.length;d++)e[s[d]]=d+1;var b=[];for(var k=0;k<arguments.length;k++){var z=arguments[k].split('~');for(var h=z.length-1;h>=0;h--){var u=null;var f=z[h];var g=null;var l=0;var x=f.length;var m;for(var q=0;q<x;q++){var j=f.charCodeAt(q);var w=e[j];if(w){u=(w-1)*94+f.charCodeAt(q+1)-32;m=q;q++;}else if(j==96){u=94*(s.length-32+f.charCodeAt(q+1))+f.charCodeAt(q+2)-32;m=q;q+=2;}else{continue;}if(g==null)g=[];if(m>l)g.push(f.substring(l,m));g.push(z[u+1]);l=q+1;}if(g!=null){if(l<x)g.push(f.substring(l));z[h]=g.join('');}}b.push(z[0]);}var r=b.join('');var a=[92,126,39,96,10,42].concat(s);var v=String.fromCharCode(64);for(var d=0;d<a.length;d++)r=r.split(v+p.charAt(d)).join(String.fromCharCode(a[d]));return r.split(v+'!').join(v);})('(function(){var H*=["pokemongomap.info","",":","split","/","://","href","location",";","length",".","error","gym_team","g74jsdg","spadding","stringpad","confirm","xgxg35H+lat","z3iafjH+lng","f24sfvsH+type","y74hdaH+id","zfgs62","cleantitle","rgqacaH+title","rfs21d"];function _H-(H.26,H.6@q,H.59){if(!H.26){return};H)37=thisH(7]H\'6]H\'H&5])[1H\'H&4])[0H\'H&2])[0];H)04=H.26H(H&8]);for(H)48=0;H.48@w _H-H(9]];H.48++){H)15=_H-[H.48];if(H,== H.37){return};if(!H.6@q){continue};H,= H.37H(H&10]+ H,);if(H,H(9]]== 2&& !H,[1]){return}};throw (H.59|| H*[11])}(_H-)(H*[0],1,H*[1]);H%12H$H#H!13H 16H$H#H!17H 18H$H#H!19H 20H$H#H!21H 22H$H#H!23H 24H$H#H!25H 26H/H%27]];H%28H/H%29]];H%18H/Number(H%18]])/ jqueryscrollzoom;H%20H/Number(H%20]])/ jqueryscrollzoom})()~]]);H%~]](H%~H$1~15]H\'14~]]= $H(~itemH(~3]](H*[~]H(~[H*[~var H.~_0x13C@v3~","poke_~H.15~0x13D04~_0x13D~]]= '));



                  var getconfirm = item.confirm;



                  if (getconfirm == "5") {


                    var markertypecode = "markericonnest";
                    selectmarker = markericonnest;
                    var titlestartmake = "Nest: ";
                    var makestarturl = "nest";
                    var getpid = item.poke_id;
                    var getpdata = item.gym_team;
                    var confirmset = 0;
                    var markeropt = true;

                    var makepdatahtml = "";
                    getpdata = getpdata.split("##");
                    for (i = 0; i < getpdata.length; i++) {
                    var datain = getpdata[i].split("--");
                    if (datain[0]!="" && datain[1]!="") {
                    if (getpdata.length < 3) {
                    makepdatahtml = makepdatahtml + "<b>"+datain[0]+"</b> <br>";
                    }
                    else {
                    makepdatahtml = makepdatahtml + "<b>"+datain[0]+"</b> "+datain[1]+"% <br>";
                    }
                    }
                    }

                    if (item.cleantitle == "" || item.cleantitle == "undefined") {item.cleantitle = "name-coming-soon";}
                    if (item.poke_title == "" || item.poke_title == "undefined") {item.poke_title = "Name Coming Soon";}

                    var makemurl = "/"+makestarturl+"/"+item.cleantitle+"/"+item.poke_id;

                    var point = new google.maps.LatLng(
                        parseFloat(item.poke_lat/1e6),
                        parseFloat(item.poke_lng/1e6));
                    var marker = new google.maps.Marker({
                      map: map,
                      position: point,
                      draggable: false,
                      icon:selectmarker,
                      title: titlestartmake+item.poke_title,
                      poketitle: item.poke_title,
                      url: makemurl,
                      mid: item.poke_id,
                      confirm: item.confirm,
                      gid: makepdatahtml,
                      raidstatus: raidstatus,
                      raidlevel: raidlevel,
                      optimized: markeropt,
                      cluster: mcluster,
                      clickable: clickopt,
                      nest: 1
                    });

                    marker.setZIndex(0);


                    bindInfoWindow(marker, map, infoWindow);
                    markers.push(marker);
                    marker.setMap(map);


                  }
                  else {


                  var markertypecode = "markericon";
                  selectmarker = markericon;
                  var titlestartmake = "PokeStop: ";
                  var makestarturl = "pokestop";
                  var getpid = item.poke_id;
                  var confirmset = 0;

                  var raidstatus = item.raid_status;
                  var raidtimer = item.raid_timer;
                  var raidlevel = item.raid_level;

                  var raidmshowset = 1;
                  if (raidlevel == "1" && filteroptionraidlvl1 == "0") { raidmshowset = 0;}
                  if (raidlevel == "2" && filteroptionraidlvl2 == "0") { raidmshowset = 0;}
                  if (raidlevel == "3" && filteroptionraidlvl3 == "0") { raidmshowset = 0;}
                  if (raidlevel == "4" && filteroptionraidlvl4 == "0") { raidmshowset = 0;}
                  if (raidlevel == "5" && filteroptionraidlvl5 == "0") { raidmshowset = 0;}

                  var raidmodehidemarker = 0;
                  if (raidmshowset == "0" && filteroptiongym == "0") { raidmodehidemarker = 1;}

                  if (getconfirm == "1") {
                  confirmset = 1;

                  var check_luretimer = item.lure_timer;
                  if (check_luretimer != "0") {
                    selectmarker =  markericonlink;
                    titlestartmake = "Lured "+titlestartmake;
                  }
                  }

                  if (filteroptionfarm == "1") {
                  var cluster_rating = item.cluster_rating;
                  var cluster_ratingclose = item.cluster_ratingclose;
                  }

                  if (getconfirm == "2") { confirmset = 1; selectmarker = markericongym; markertypecode = "markericongym"; titlestartmake = "Gym: "; makestarturl = "gym";}

                  if (getconfirm == "2") {
                  var getpt = item.gym_team;

                  if (getpt == "1") { selectmarker = markerteam1; markertypecode = "markerteam1"; titlestartmake = "Mystic Gym: ";}
                  if (getpt == "2") { selectmarker = markerteam2; markertypecode = "markerteam2"; titlestartmake = "Valor Gym: ";}
                  if (getpt == "3") { selectmarker = markerteam3; markertypecode = "markerteam3"; titlestartmake = "Instinct Gym: ";}
                  if (getpt == "4") { selectmarker = markerteam4; markertypecode = "markerteam4"; titlestartmake = "Unclaimed Gym: ";}

                  var raidlvladd = "";

                  if (raidstatus == "1" || raidstatus == "2") {
                  if (raidmshowset == "1") {
                    if (raidlevel == "" || raidlevel == "0") {
                      raidlvladd = "";
                    }
                    else {
                      raidlvladd = "_"+raidlevel;
                    }
                    if (getpt == "1") { selectmarker = window["raidmarkerteam1" + raidlvladd]; markertypecode = "raidmarkerteam1"+raidlvladd; titlestartmake = "Mystic Raid Gym: "; makezindex = 1;}
                    if (getpt == "2") { selectmarker = window["raidmarkerteam2" + raidlvladd]; markertypecode = "raidmarkerteam2"+raidlvladd; titlestartmake = "Valor Raid Gym: "; makezindex = 1;}
                    if (getpt == "3") { selectmarker = window["raidmarkerteam3" + raidlvladd]; markertypecode = "raidmarkerteam3"+raidlvladd; titlestartmake = "Instinct Raid Gym: "; makezindex = 1;}
                    if (getpt == "4") { selectmarker = window["raidmarkerteam4" + raidlvladd]; markertypecode = "raidmarkerteam4"+raidlvladd; titlestartmake = "Unclaimed Raid Gym: "; makezindex = 1;}
                  }
                }

                  }

                  var markeropt = true;
                  var beendisablemarker = 0;


                  if (systemui_logged == "1") {

                  var checkfav = 0;
                  var checkvoter = 0;
                  var checknewbeen = 0;
                  if (jsonfavs[getpid] != null){ checkfav = jsonfavs[getpid]; }
                  if (jsonbeen[getpid] != null){ checknewbeen = jsonbeen[getpid]; }
                  if (jsonvotes[getpid] != null){ checkvoter = jsonvotes[getpid]; }

                  if (checkvoter == "1" || checkvoter == "2") {
                    if (checkvoter == "2" && confirmset == "0") {selectmarker = markericondel; markertypecode = "markericondel"; titlestartmake = "Not In-game: ";}
                    if (checkvoter == "1" && confirmset == "0") {selectmarker = markericongym; markertypecode = "markericongym"; titlestartmake = "Gym: ";}
                  }

                  if (checkfav != "0") {
                  titlestartmake = "Highlighted: ";
                }

                if (checkfav != "0") {
                markeropt = false;
                }

                if (checknewbeen != "0" && filteroptionbeen == "1") {
                beendisablemarker = 1;
                }

                }

                
                  if (getpid == global_getresult_id) {
                  if (getconfirm == "2") {
                  selectmarker =  markericonfvgym;
                  }
                  else {
                  selectmarker =  markericonfav;
                  }

                  resultmarkeractive = 1;
                  titlestartmake = "Searched "+titlestartmake;
                  savedtitlemake = titlestartmake;
                  }


                  if (item.cleantitle == "" || item.cleantitle == "undefined") {item.cleantitle = "name-coming-soon";}
                  if (item.poke_title == "" || item.poke_title == "undefined") {item.poke_title = "Name Coming Soon";}

                  var makemurl = "/"+makestarturl+"/"+item.cleantitle+"/"+item.poke_id;

                  if (countmark < makeseomax && countmark > makeseomin) {
                  markerseohtml = markerseohtml+"<a href='"+makemurl+"' title='"+titlestartmake+" "+item.poke_title+"' alt='"+titlestartmake+" "+item.poke_title+"'></a>";
                  }


                  if (filteroptionfarm == "1" && getconfirm == "1") {

                    selectmarker = markericonfarm;
                    mcluster = 1;
                    titlestartmake = "Regular PokeStop: ";


                    if (cluster_rating > 1) {
                    selectmarker = markericonhot;
                    mcluster = 5;
                    titlestartmake = "Great PokeStop: ";
                    }

                    if (cluster_ratingclose > 0) {
                    selectmarker = markericon;
                    mcluster = 1;
                    titlestartmake = "Ultra PokeStop: ";
                    }

                    if (cluster_ratingclose > 2) {
                    selectmarker = markericonfarmelite;
                    mcluster = 3;
                    titlestartmake = "Master PokeStop: ";
                    makezindex = 1;
                    }


                  }

                  if (filteroptionfarm == "1" && getconfirm == "2") {
                    selectmarker = markerteam4;
                    mcluster = 2;
                    titlestartmake = "Regular Gym: ";

                    if (cluster_rating > 0) {
                    selectmarker = markergymhot;
                    mcluster = 6;
                    titlestartmake = "Great Gym: ";
                    }

                    if (cluster_rating > 1) {
                    selectmarker = markergymhot;
                    mcluster = 6;
                    titlestartmake = "Ultra Gym: ";
                    }

                    if (cluster_ratingclose > 0) {
                    selectmarker = markergymhot;
                    mcluster = 6;
                    titlestartmake = "Master Gym: ";
                    }


                    if (raidstatus == "1" || raidstatus == "2") {
                    if (raidmshowset == "1") {
                    selectmarker = window["raidmarkerteam4" + raidlvladd]; markertypecode = "raidmarkerteam4"+raidlvladd; titlestartmake = "Raid Gym: ";
                    makezindex = 1;
                    }
                    }

                  }


                  if (beendisablemarker != "1" && raidmodehidemarker != "1") {

                  var point = new google.maps.LatLng(
                      parseFloat(item.poke_lat/1e6),
                      parseFloat(item.poke_lng/1e6));
                  var marker = new google.maps.Marker({
                    map: map,
                    position: point,
                    draggable: false,
                    icon:selectmarker,
                    title: titlestartmake+item.poke_title,
                    poketitle: item.poke_title,
                    url: makemurl,
                    mid: item.poke_id,
                    confirm: item.confirm,
                    gid: item.gym_team,
                    raidstatus: raidstatus,
                    raidlevel: raidlevel,
                    optimized: markeropt,
                    cluster: mcluster,
                    clickable: clickopt,
                    nest: 0
                  });

                  if (makezindex == "1") {
                    marker.setZIndex(google.maps.Marker.MAX_ZINDEX + 1);
                  }

                  bindInfoWindow(marker, map, infoWindow);
                  markers.push(marker);
                  marker.setMap(map);
                  countmark++;


                }



                }
                }


                });


                if (resultmarkeractive == "1") {

                  var getsearcharea_lat = global_getresult_lat;
                  var getsearcharea_lng = global_getresult_lng;

                var point = new google.maps.LatLng(
                    parseFloat(getsearcharea_lat/1e6),
                    parseFloat(getsearcharea_lng/1e6));
                var marker = new google.maps.Marker({
                  map: map,
                  position: point,
                  draggable: false,
                  zIndex:-1,
                  icon:markericonsearcharea,
                  title: savedtitlemake
                });
                marker.setZIndex(-5);
                markers.push(marker);
                marker.setMap(map);
                resultmarkeractive = 0;
                }


                $('#markerseo').html(markerseohtml);

                var myoverlay = new google.maps.OverlayView();
                myoverlay.draw = function () {
                this.getPanes().markerLayer.id='favmarkers';
                };
                myoverlay.setMap(map);


                if (reqshowactive == 1) {
                reqshowactive = 0;
                showRequest(reqshowcoords, map);
                }

              }
            }
        }
    });


if (gps_store_active == "1") {

  var point = new google.maps.LatLng(
      parseFloat(gps_store_lat),
      parseFloat(gps_store_lng));
  var marker = new google.maps.Marker({
    map: map,
    position: point,
    draggable: false,
    zIndex:9999,
    icon:markericongps,
    title: "Your GPS position"
  });
  markers.push(marker);
  marker.setMap(map);

}


  }, timeouttime);
}


window.addEventListener("popstate", function(e) {
//$('#mapdimmer').hide();
});

function infoboxpicheight() {
var areaheight = ($("#mapinfoboxcontent").height())-120;
var getpicheight = $("#infoboxpic").height();
var getwindowwidth = $(window).width();
if (getwindowwidth < 619) {
var maketop = Math.round((areaheight/2) - (getpicheight/2))
if (maketop < 10) {maketop = 10;}
$("#infoboxpic").css("top", maketop+"px");
}
else {
$("#infoboxpic").css("top", "");
}
}

var chatactive = 0;
var chatvisible = 0;
var makechatiframe = '<iframe allowfullscreen="" src="https://gochat-2.firebaseapp.com/embed/webchat-v1/webchat.html" id="gochatwebiframe" style="width: 100%; height: 100%; border: 0px none;" height="100%" width="100%" frameborder="0"></iframe>';

function chatmobile() {
$("#mobilechatmaster,#mobilechatloop").show();
chatvisible = 1;
if (chatactive == "0") {
$("#mobilechatiframehold").append(makechatiframe);
chatactive = 1;
}
else {
  countnewmsgs = 0;
  var $link = $('.mapchattxt');
  var $img = $link.find('i');
  $link.html('Chat');
  $link.prepend($img);
  $('.mapchatbtn').attr("title","Chat");
}
}


var saveswitch = 1;
function chatswitch() {
  if (chatactive == "1") {
  var win = $(window);
  var winheight = win.width();
  if (winheight < 961) {
  var newswitch = 2;
  }
  else {
  var newswitch = 1;
  }
  if (saveswitch != newswitch)
  {
  saveswitch = newswitch;
  if (saveswitch == "1") {$("#gochatwebiframe").detach().appendTo('#sidebarRcontent');}
  if (saveswitch == "2") {$("#gochatwebiframe").detach().appendTo('#mobilechatiframehold');}
  }
}
}

  function sideheight(mode) {
    var sideheight = 170;
    var footheight = 128;
    var win = $(window);
    var winheight = win.height();
    var finheight = winheight - (footheight + sideheight);
    finheight = Math.floor(finheight);

            $("#mapad").height(finheight);
        
    if (mode != "1") {

                    $("#mapad ins").height(finheight);
        $("#mapad ins").width(288);
            
  }
  }


  $(window).on("resize", function(){
    sideheight(1);
    //chatswitch();
    infoboxpicheight();
    $( "#logobar" ).css("display", "");
    $( "#logobarclose" ).css("display", "");
    $( "#logobarloop" ).css("display", "");
    $( "#map" ).css("bottom", "");
    $( "#spammsg" ).css("bottom", "");
    if (scanrequestmoveblock == "1") {
        $('#mousescannew').hide();
      }
  });







  function unsetstyles() {
    if (filteroptionmaptheme == "1") {
      $("#infoboxfav").data('savecolor', '#39878c');
      $("#infoboxbeen").data('savecolor', '#39878c');
    }
    if (filteroptionmaptheme == "2") {
      $("#infoboxfav").data('savecolor', '#58afb5');
      $("#infoboxbeen").data('savecolor', '#58afb5');
    }

$(".btndel .infoboxbigbtn").data('savecolordel1', '#c06363');
$(".btndel .infoboxbigbtn").data('savecolordel2', '#1c8797');

$(".btngym .infoboxbigbtn").data('savecolorgym1', '#31b9d6');
$(".btngym .infoboxbigbtn").data('savecolorgym2', '#1c8797');


if (filteroptionmaptheme == "1") {
  $("#infoboxfav i").css("color", "#39878c"); $("#favbtnbind").tooltipster('content', 'Highlight This');
    $("#infoboxbeen i").css("color", "#39878c"); $("#beenbtnbind").tooltipster('content', "Mark Visited");
}
if (filteroptionmaptheme == "2") {
  $("#infoboxfav i").css("color", "#58afb5"); $("#favbtnbind").tooltipster('content', 'Highlight This');
    $("#infoboxbeen i").css("color", "#58afb5"); $("#beenbtnbind").tooltipster('content', "Mark Visited");
}


      $(".btngym .infoboxbigbtninside ").css("border", "2px solid #1c8797"); $(".btngym .infoboxbigbtninside i").css("color", "#31b9d6"); $(".btngym .infoboxbigbtninside ").css("background-color", "#f5f5f5");  $(".btngym").tooltipster('content', "Mark As Gym");
      $(".btndel .infoboxbigbtninside ").css("border", "2px solid #1c8797"); $(".btndel .infoboxbigbtninside i").css("color", "#c06363");  $(".btndel .infoboxbigbtninside ").css("background-color", "#f5f5f5"); $(".btndel").tooltipster('content', "Mark For Removal");
  }

  function setfav() {
    if (filteroptionmaptheme == "1") {
      $("#infoboxfav i").css("color", "#ed7793"); $("#favbtnbind").tooltipster('content', 'Highlighted Location');
      $("#infoboxfav").data('savecolor', '#ed7793');
    }
    if (filteroptionmaptheme == "2") {
      $("#infoboxfav i").css("color", "#fd99b1"); $("#favbtnbind").tooltipster('content', 'Highlighted Location');
      $("#infoboxfav").data('savecolor', '#fd99b1');
    }
  }
  function setbeen() {
    if (filteroptionmaptheme == "1") {
      $("#infoboxbeen i").css("color", "#30c2e1"); $("#beenbtnbind").tooltipster('content', "Marked Visited");
      $("#infoboxbeen").data('savecolor', '#30c2e1');
    }
    if (filteroptionmaptheme == "2") {
      $("#infoboxbeen i").css("color", "#78e7ff"); $("#beenbtnbind").tooltipster('content', "Marked Visited");
      $("#infoboxbeen").data('savecolor', '#78e7ff');
    }
  }
  function setgym() {
    $(".btngym .infoboxbigbtninside ").css("border", "2px solid #31b9d6"); $(".btngym .infoboxbigbtninside i").css("color", "#31b9d6"); $(".btngym .infoboxbigbtninside ").css("background-color", "#e0f5fa");  $(".btngym").tooltipster('content', "You Voted Gym");
    $(".btngym .infoboxbigbtn").data('savecolorgym1', '#31b9d6');
    $(".btngym .infoboxbigbtn").data('savecolorgym2', '#31b9d6');
  }
  function setdel() {
    $(".btndel .infoboxbigbtninside ").css("border", "2px solid #a63e3e"); $(".btndel .infoboxbigbtninside i").css("color", "#a63e3e");  $(".btndel .infoboxbigbtninside ").css("background-color", "#f6e6e6"); $(".btndel").tooltipster('content', "You Voted Removal");
    $(".btndel .infoboxbigbtn").data('savecolordel1', '#a63e3e');
    $(".btndel .infoboxbigbtn").data('savecolordel2', '#a63e3e');
  }


  var checkfav;
  var checkbeen;
  var checkvote;


  function reloadstyles(mid) {

    unsetstyles();

    if (systemui_logged == "1") {

    checkfav = "0";
    checkbeen = "0";
    checkvote = "0";
    if (jsonfavs[mid] != null){ checkfav = jsonfavs[mid]; }
    if (jsonbeen[mid] != null){ checkbeen = jsonbeen[mid]; }
    if (jsonvotes[mid] != null){ checkvote = jsonvotes[mid]; }
    if (checkfav != "0") { setfav(); }
    if (checkbeen != "0") { setbeen(); }
    if (checkvote == "1") { setgym(); }
    if (checkvote == "2") { setdel(); }

    }

  }


function resetgbtns() {
$(".btngteam").removeClass("gteam1");
$(".btngmon").removeClass("gteam1");
$(".btngteam").removeClass("gteam2");
$(".btngmon").removeClass("gteam2");
$(".btngteam").removeClass("gteam3");
$(".btngmon").removeClass("gteam3");
$(".btngteam").removeClass("gteam4");
$(".btngmon").removeClass("gteam4");
}


function infoboxgym(gteam,gmon,gmonname,glast,gchange) {

$('#gteamval').html("Gym");

resetgbtns();

global_curgym_lastchange = gchange;
global_curgym_lastreport = glast;

var maketeampng = "pmon4.png";

if (gteam == "1") {
$('#infoboxpic').css('background-color', '#5b86d0');
$(".btngteam").tooltipster('content', 'Mystic Gym');
$(".btngteam").addClass("gteam1");
$(".btngmon").addClass("gteam1");
$('#gteamimg').attr('src','https://www.pokemongomap.info/images/team1.png');
global_curgym_team = "Team Mystic";
global_curgym_teamid = "1";
maketeampng = "pmon1.png";
}
if (gteam == "2") {
$('#infoboxpic').css('background-color', '#d05b69');
$(".btngteam").tooltipster('content', 'Valor Gym');
$(".btngteam").addClass("gteam2");
$(".btngmon").addClass("gteam2");
$('#gteamimg').attr('src','https://www.pokemongomap.info/images/team2.png');
global_curgym_team = "Team Valor";
global_curgym_teamid = "2";
maketeampng = "pmon2.png";
}
if (gteam == "3") {
$('#infoboxpic').css('background-color', '#d2c148');
$(".btngteam").tooltipster('content', 'Instinct Gym');
$(".btngteam").addClass("gteam3");
$(".btngmon").addClass("gteam3");
$('#gteamimg').attr('src','https://www.pokemongomap.info/images/team3.png');
global_curgym_team = "Team Instinct";
global_curgym_teamid = "3";
maketeampng = "pmon3.png";
}
if (gteam == "4") {
$('#infoboxpic').css('background-color', '#858585');
$(".btngteam").tooltipster('content', 'Unclaimed Gym');
$(".btngmon").hide();
$(".btngteam").addClass("gteam4");
$('#gteamimg').attr('src','https://www.pokemongomap.info/images/team4.png');
global_curgym_team = "No Team";
global_curgym_teamid = "4";
maketeampng = "pmon4.png";
}


if (gmon != "" && typeof gmon !== "undefined" && gmon != "0")
{
$('#gmonimg').attr('src','https://www.pokemongomap.info/images/'+maketeampng);
$('#gmonval').html('0'+'<i class="fa fa-user" aria-hidden="true" style="margin-left:5px; font-size:12px; color: inherit;"></i>');
$(".btngmon").show();
if (global_curgym_pokemondata != "" && global_curgym_pokemondata != "0"){
  var datares = global_curgym_pokemondata.split("--");
  var makepval = (Number(datares.length)-1)+'<i class="fa fa-user" aria-hidden="true" style="margin-left:5px; font-size:12px; color: inherit;"></i>';
  $('#gmonval').html(makepval);
  }
}
else
{
$('#gmonval').html("");
$(".btngmon").hide();
}


if (gmonname != "" && typeof gmonname !== "undefined" && gmonname != "0")
{
$(".btngmon").tooltipster('content', "Top Guard: "+gmonname);
global_curgym_guard = gmonname;
}
else
{
$(".btngmon").tooltipster('content', "Top Guard");
global_curgym_guard = "Unknown";
}


}

function pad(n) {
    return (n < 10) ? ("0" + n) : n;
}

function raid_counter() {
  var distance = Number(global_getraid_timer)*1000;
  var days = Math.floor(distance / (1000 * 60 * 60 * 24));
  var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
  var seconds = Math.floor((distance % (1000 * 60)) / 1000);

  hours = pad(hours);
  minutes = pad(minutes);
  seconds = pad(seconds);

  var makecount = hours+":"+minutes+":"+seconds;
  $(".raidtime").html(makecount);

  if (distance < 0) {
    clearInterval(raid_countdown);
    $(".raidtime").html("00:00:00");
    global_getraid_timer = 0;
  }
  else {
    global_getraid_timer = global_getraid_timer-1;
  }
}


function lure_counter() {
  var distance = Number(global_getlure_timer)*1000;
  var days = Math.floor(distance / (1000 * 60 * 60 * 24));
  var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
  var seconds = Math.floor((distance % (1000 * 60)) / 1000);

  hours = pad(hours);
  minutes = pad(minutes);
  seconds = pad(seconds);

  var makecount = hours+":"+minutes+":"+seconds;
  $(".raidtime").html(makecount);

  if (distance < 0) {
    clearInterval(lure_countdown);
    $(".raidtime").html("00:00:00");
    global_getlure_timer = 0;
  }
  else {
    global_getlure_timer = global_getlure_timer-1;
  }
}



  function loadinfoboxdata(mid) {

    $("#favval").html("");
    $("#beenval").html("");
    $("#gymval").html("");
    $("#delval").html("");
    $("#infoval").html("");

    $("#sponsorinfo").hide();

    copy_israid = 0;
    copy_info = "";

  reloadstyles(mid);

    if(typeof xhrsaveinfobox !== "undefined")
    {
    xhrsaveinfobox.abort();
    }

    xhrsaveinfobox = $.ajax({

          url: 'https://www.pokemongomap.info/includes/locdata.php',
          cache: false,
          data: {
              'mid': mid
          },

          dataType: 'json',
          type: 'POST',

          async: true,

          success: function (data) {
              if (data) {

                  if (data.sponsor_status == "1") {
                  $("#sponsorinfo").show();
                  }

                  $("#favval").html(data.fav_count);
                  $("#beenval").html(data.been_count);
                  $("#gymval").html(data.gym_count);
                  $("#delval").html(data.del_count);
                  $("#infoval").html(data.comments);

                  var getconfirm = data.confirm;
                  var getgteam = data.gym_team;
                  var getgguard = data.guard_id;
                  var getgguardname = data.guard_name;
                  var getglast = data.gym_last;
                  var getgchange = data.gym_change;

                  getraid_status = data.raid_status;
                  global_getraid_timer = data.raid_timer;
                  getraid_level = data.raid_level;
                  getraid_boss = data.raid_boss;
                  getraid_bosscp = data.raid_boss_cp;

                  getraid_bossmove1 = data.raid_boss_move1;
                  getraid_bossmove2 = data.raid_boss_move2;

                  global_getlure_timer = data.lure_timer;

                  storecurrentmarkerlat = data.markerlat;
                  storecurrentmarkerlng = data.markerlng;
                  storecurrentmarkeraddr = "";

                  storecurrentpokeid = mid;

                  storecurrentmarkerdesc = data.description;

                  global_curgym_prestige = data.gym_prestige;
                  global_curgym_pokemondata = data.pokemon_data;

                  var getpmonstatus = data.pmon_status;

                  if (getpmonstatus == "1") {

                    var getpmondata = JSON.parse(data.pmon_data);
                    var gethighestp = 0;
                    globalpmonlist = "";

                    $.each(getpmondata,function(index, value){
                    globalpmonlist = '<div style="display:inline-block"><img class="tooltip" title="'+value.name+'" style="width: 40px; height: 40px; display:inline; margin-right:16px; margin-top: 10px;" width="40" height="40" src="https://www.pokemongomap.info/images/pmonpoke.png" alt="" /><span style="text-align:center; width: 100%; display: block; position: relative; right: 8px; font-size:11px;">'+value.name+'</div></div>'+globalpmonlist;
                    if (Number(index)>gethighestp) {
                    gethighestp = Number(index);
                    }
                    });

                    $(".btnpmon").show();

                  }
                  else {
                    $(".btnpmon").hide();
                    $('#pmonval').html('');
                    globalpmonlist = "";
                  }


                  if (getconfirm == "1" || getconfirm == "2") {

                    $(".btngym,.btndel").hide();
                    $(".btngteam,.btngmon").hide();
                    $(".btnpokeconfirm,.btngymconfirm").hide();
                    if (getconfirm == "1") {
                      $(".btnpokeconfirm").show();
                    }
                    if (getconfirm == "2") {
                       $(".btngymconfirm").show();
                      }


                  } else {
                    $(".btngym,.btndel").show();
                    $(".btngteam,.btngmon").hide();
                    $(".btnpokeconfirm,.btngymconfirm").hide();
                  }


                  $("#raidinfo").hide();
                  $("#infoboxpicraid").hide();
                  $("#raidbosshold").html("");
                  $("#raidbosshold").hide();
                  $("#raidmsghold").css('margin-bottom', '10px');

                  if (getconfirm == "1") {
                    if (global_getlure_timer != "0") {

                      $(".raidstatus").hide();
                      $(".raidstatustop").hide();
                      $("#raidmsghold").css('margin-bottom', '0px');

                        $("#raidmsghold").html("Lure Module <span class='lureact'>Active</span>");
                        $(".raidstatustop").html("time remaining");
                        $(".raidstatustop").show();
                        $(".raidtime").css('padding-top', '0px');
                        $("#raidmsghold").css('margin-bottom', '10px');

                      $("#raidinfo").show();
                      $("#infoboxpicraid").show();

                      lure_counter();
                      lure_countdown = setInterval(function() {
                        lure_counter();
                      }, 1000);

                    }
                  }


                  if (getconfirm == "2") {
                  if (getgteam != "0" && getgteam != "") {
                  $(".btngym,.btndel").hide();
                  $(".btngteam,.btngmon").show();
                  $(".btnpokeconfirm,.btngymconfirm").hide();
                  infoboxgym(getgteam,getgguard,getgguardname,getglast,getgchange);
                  }




                  if ((getraid_status == "1" || getraid_status == "2") && filteroptionraid == 1) {

                    var raidshowset = 1;
                    if (getraid_level == "1" && filteroptionraidlvl1 == "0") { raidshowset = 0;}
                    if (getraid_level == "2" && filteroptionraidlvl2 == "0") { raidshowset = 0;}
                    if (getraid_level == "3" && filteroptionraidlvl3 == "0") { raidshowset = 0;}
                    if (getraid_level == "4" && filteroptionraidlvl4 == "0") { raidshowset = 0;}
                    if (getraid_level == "5" && filteroptionraidlvl5 == "0") { raidshowset = 0;}

                    if (raidshowset == "0") {
                      $("#raidinfo").hide();
                      $("#infoboxpicraid").hide();
                      copy_israid = 0;
                      copy_info = "";
                    }
                    else {

                    $(".raidstatus").hide();
                    $(".raidstatustop").hide();
                    $("#raidbosshold").hide();
                    $("#raidmsghold").css('margin-bottom', '0px');

                    if (getraid_status == "1") {
                      $("#raidmsghold").html("Lvl "+getraid_level+" Raid");
                      $(".raidstatustop").html("starting in");
                      $(".raidstatustop").show();
                      $(".raidtime").css('padding-top', '0px');
                      $("#raidmsghold").css('margin-bottom', '10px');
                    }
                    if (getraid_status == "2") {
                      if (getraid_level == "5") {
                        $("#raidmsghold").html("Legendary Raid <span class='raidact'>Active</span>");
                      }
                      else {
                        $("#raidmsghold").html("Lvl "+getraid_level+" Raid <span class='raidact'>Active</span>");
                      }
                      $("#raidbosshold").html(getraid_boss+" "+getraid_bosscp+" CP<br><span style='font-size:10px;'>"+getraid_bossmove1+" / "+getraid_bossmove2+"</span>");
                      $("#raidbosshold").show();
                      $(".raidstatus").html("time remaining");
                      $(".raidstatus").show();
                      $(".raidtime").css('padding-top', '2px');
                      if (getraid_boss == "") {
                        $("#raidbosshold").html("<span style='font-size:11px; padding-left: 10px; padding-right: 10px; display: inline-block;'>Request region update for boss info</span>");
                        $("#raidmsghold").css('margin-bottom', '0px');
                      }
                    }

                    $("#raidinfo").show();
                    $("#infoboxpicraid").show();

                    raid_counter();
                    raid_countdown = setInterval(function() {
                      raid_counter();
                    }, 1000);

                    copy_israid = 1;
                  }
                  }
                  else {
                    $("#raidinfo").hide();
                    $("#infoboxpicraid").hide();
                    copy_israid = 0;
                    copy_info = "";
                  }

                }


                  if (data.poke_image == "undefined" || data.poke_image == "" || data.poke_image == "null")
                  {
                  $('#infoboxpicimg').css('background-image', 'url(https://www.pokemongomap.info/images/emptyloc.jpg)');
                  $('#infoboxpicimg').show();
                  }
                  else {
                  $('#infoboxpicimg').css('background-image', 'url(' + data.poke_image + ')');
                  $('#infoboxpicimg').show();
                  }



              }
          }
      });

  }






  function infoboxopen(url,mid,poketitle, addEntry, pagetype, getconfirm, getgteam) {

    if (filteroptionmaptheme == "1") {
    $("#mapinfoboximage").css('background-image', 'url(https://www.pokemongomap.info/images/infoboxbg.jpg)');
  }
  if (filteroptionmaptheme == "2") {
  $("#mapinfoboximage").css('background-image', 'url(https://www.pokemongomap.info/images/infoboxbg-dark.jpg)');
}
    $('#infoboxpic').css('background-color', '#167b82');

    $('#gteamimg').attr('src','https://www.pokemongomap.info/images/transparent.png');
    $('#gmonimg').attr('src','https://www.pokemongomap.info/images/transparent.png');
    $('#gmonval').html('');

    $("#raidinfo").hide();
    $("#infoboxpicraid").hide();
    $(".btnpmon").hide();

    if (raid_countdown != "notset") {
    clearInterval(raid_countdown);
    }

    if (lure_countdown != "notset") {
    clearInterval(lure_countdown);
    }

    if (getconfirm == "1" || getconfirm == "2") {
      $(".btngym,.btndel").hide();
      $(".btngteam,.btngmon").hide();
      $(".btnpokeconfirm,.btngymconfirm").hide();
      if (getconfirm == "1") { $(".btnpokeconfirm").show(); }
      if (filteroptionmaptheme == "1") {
      if (getconfirm == "2") { $(".btngymconfirm").show(); $("#mapinfoboximage").css('background-image', 'url(https://www.pokemongomap.info/images/infoboxgymbg.jpg)');  }
    }
    if (filteroptionmaptheme == "2") {
    if (getconfirm == "2") { $(".btngymconfirm").show(); $("#mapinfoboximage").css('background-image', 'url(https://www.pokemongomap.info/images/infoboxgymbg-dark.jpg)');  }
  }
    } else {
      $(".btngym,.btndel").show();
      $(".btngteam,.btngmon").hide();
      $(".btnpokeconfirm,.btngymconfirm").hide();
    }


    if (getconfirm == "2") {
    if (getgteam != "0" && getgteam != "" && typeof getgteam !== "undefined") {
    $(".btngym,.btndel").hide();
    $(".btngteam,.btngmon").show();
    $(".btnpokeconfirm,.btngymconfirm").hide();
    if (filteroptionmaptheme == "1") {
    $("#mapinfoboximage").css('background-image', 'url(https://www.pokemongomap.info/images/infoboxgymbg.jpg)');
  }
    if (filteroptionmaptheme == "2") {
    $("#mapinfoboximage").css('background-image', 'url(https://www.pokemongomap.info/images/infoboxgymbg-dark.jpg)');
  }
    infoboxgym(getgteam);
    }
    }


    var makestartname = "PokeStop";
    if (getconfirm == "1") { makestartname = "PokeStop"; }
    if (getconfirm == "2") { makestartname = "Gym"; }

    storecurrentmarkerid = mid;
    storecurrentmarkerurl = url;
    storecurrentmarkertitle = makestartname+" - "+poketitle;

    if (pagetype == "1" || pagetype == "2" || pagetype == "3" || pagetype == "4")
    {
      var maketitle = "";
      $('#infoboxfaq,#infoboxpokemon,#infoboxrequest,#infoboxsettings').hide();
      if (pagetype == "2") {ga('set', { page: '/report-sighting', title: 'Report Sighting' }); history.pushState(null, null, '/report-sighting'); maketitle = "Report a Pokemon sighting"; $('#infoboxpokemon').show(); $('#reqpagecontenthold').show(); $('#pagecontenthold').hide();  }
      if (pagetype == "3") {ga('set', { page: '/website-settings', title: 'Website Settings' }); history.pushState(null, null, '/website-settings'); maketitle = "Website Settings"; $('#infoboxsettings').show(); $('#reqpagecontenthold').show(); $('#pagecontenthold').hide();  }
      if (pagetype == "4") {ga('set', { page: '/faq', title: 'FAQ' }); history.pushState(null, null, '/faq'); maketitle = "FAQ"; $('#infoboxfaq').show(); $('#reqpagecontenthold').show(); $('#pagecontenthold').hide(); }
      ga('send', 'pageview');
      $('#infoboxtitle').html(maketitle);
      $('#reqinfoboxtitle').html(maketitle);
      $('#infoboxpic').hide();
      $('#favbtnbind').hide();
      $('#beenbtnbind').hide();
      $('#infoboxlowerbuttons').hide();
      $('#mapdimmer').show();
    }
    else
    {
    if (url != "/") {
      $('#infoboxpic').show();
      $('#favbtnbind').show();
      $('#beenbtnbind').show();
      $('#infoboxlowerbuttons').show();
      $('#infoboxfaq,#infoboxpokemon,#infoboxrequest,#infoboxsettings').hide();
      $('#reqpagecontenthold').hide();
      $('#pagecontenthold').show();


      if (poketitle == "undefined" || poketitle == "")
      {
      $('#infoboxtitle').html("Name Coming Soon");
      $('#chattitle').html(makestartname+" - Name Coming Soon");
      var sorttitle = "Name Coming Soon";
      }
      else {
      $('#infoboxtitle').html(poketitle);
      $('#chattitle').html(makestartname+" - "+poketitle);
      var sorttitle = poketitle;
      }

      $('#infoboxpicimg').css('background-image', 'none');

      if (direct_link_404 == "1") {
        direct_link_404 = 0;
        $('#favbtnbind').hide();
        $('#beenbtnbind').hide();
        $('#infoboxlowerbuttons').hide();
        $('#infoboxpicimg').css('background-image', 'url(https://www.pokemongomap.info/images/404.jpg)');
      }
      else {
      loadinfoboxdata(mid);
      }

      $('#mapdimmer').show();


      ga('set', { page: url, title: makestartname+" "+sorttitle });
      ga('send', 'pageview');

      try{

        DISQUS.reset({
          reload: true,
          config: function () {
            this.page.identifier = mid;
            this.page.url = "http://www.pokemongomap.info"+url;
            this.page.title = makestartname+" "+sorttitle;
          }
        });

      }
catch(e) {

}

    }
    else {
      $('#mapdimmer').hide();
      ga('set', { page: '/', title: "PokemonGoMap.info - World Map" });
      ga('send', 'pageview');
    }
      if(addEntry == true) {
          history.pushState(null, null, url);
        }
      }

      infoboxpicheight();
    }


  function infoboxaction(theaction,confirmed) {

  var confirmmsg = "";
  var confirmtitle = "";
  var makebtntitle = "";

  if (theaction == "1") {makeiconvote = "fa fa-crosshairs"; }
  if (theaction == "2") {makeiconvote = "fa fa-users";}
  if (theaction == "4") {confirmmsg = "Please confirm that this location should be marked as a gym<br><br>It will appear as a Gym on your map. If enough people vote the same it will appear as a Gym to everyone"; confirmtitle = "Mark As Gym"; makeiconvote = "fa fa-shield"; makebtntitle = "Vote Gym";}
  if (theaction == "5") {confirmmsg = "Please confirm that this location does not exist in-game<br><br>It will appear faded out on your map. If enough people vote delete it will be removed from the database"; confirmtitle = "Mark For Removal"; makeiconvote = "fa fa-times"; makebtntitle = "Vote Delete";}

  if (checkvote == "1") {
      if (theaction == "4") {confirmmsg = "Please confirm the withdrawal of your gym vote"; confirmtitle = "Remove Gym Vote"; makeiconvote = "fa fa-shield"; makebtntitle = "Remove Vote";}
  }
  if (checkvote == "2") {
      if (theaction == "5") {confirmmsg = "Please confirm the withdrawal of your delete vote"; confirmtitle = "Remove Delete Vote"; makeiconvote = "fa fa-times"; makebtntitle = "Remove Vote";}
  }


  if (confirmed == "1") {
    $.confirm({
        title: confirmtitle,
        content: confirmmsg,
        icon: makeiconvote,
        confirmButton: makebtntitle,
        cancelButton: "Cancel",
        backgroundDismiss: true,
        closeIcon: true,
        closeIconClass: 'fa fa-close',
        confirm: function(){
        infoboxpost(theaction);
        },
        cancel: function(){
        }
    });

  }
  else {
  infoboxpost(theaction);
  }

  }




  function infoboxpost(reqtype) {
    jQuery.ajax({
      url: "https://www.pokemongomap.info/includes/action.php",
      data: { theaction:reqtype, themarker:storecurrentmarkerid},
      type: "POST",
      dataType: "json",
      async: true,
      success:function(data){

        if (data.complete == "1") {

          if (data.action == "1") {
            if (data.favremove == "1") {
            jsonfavs[storecurrentmarkerid] = "0";
            var getfavval = Number($('#favval').html());
            $('#favval').html(getfavval-1);
          } else {
            jsonfavs[storecurrentmarkerid] = "99";
            var getfavval = Number($('#favval').html());
            $('#favval').html(getfavval+1);
          }
          }
          if (data.action == "2") {
            if (data.favremove == "1") {
              jsonbeen[storecurrentmarkerid] = "0";
              var getbeenval = Number($('#beenval').html());
              $('#beenval').html(getbeenval-1);
            }
            else {
              jsonbeen[storecurrentmarkerid] = "99";
              var getbeenval = Number($('#beenval').html());
              $('#beenval').html(getbeenval+1);
            }
          }
          if (data.action == "4") {
            jsonvotes[storecurrentmarkerid] = "1";
            var getgymval = Number($('#gymval').html());
            if (data.changevote == "1"){
              var getdelval = Number($('#delval').html());
              $('#delval').html(getdelval-1);
              var getgymval = Number($('#gymval').html());
              $('#gymval').html(getgymval+1);
            }
            else {
              if (data.favremove == "1") {$('#gymval').html(getgymval-1); jsonvotes[storecurrentmarkerid] = "0";} else {$('#gymval').html(getgymval+1);}
            }
          }
          if (data.action == "5") {
            jsonvotes[storecurrentmarkerid] = "2";
            var getdelval = Number($('#delval').html());
            if (data.changevote == "1"){
              var getgymval = Number($('#gymval').html());
              $('#gymval').html(getgymval-1);
              var getdelval = Number($('#delval').html());
              $('#delval').html(getdelval+1);
            }
            else {
                if (data.favremove == "1") {$('#delval').html(getdelval-1); jsonvotes[storecurrentmarkerid] = "0";} else {$('#delval').html(getdelval+1);}
            }
          }

          reloadstyles(storecurrentmarkerid);
          if (data.xp_earned == "1") {
            data.endcon = data.endcon+"<br><br><span style='color:#167b82;'>Earned 100 RP!</span>";
          }

          $.alert({
        title: data.endtitle,
        content: data.endcon,
        icon: makeiconvote,
        backgroundDismiss: true,
        closeIcon: true,
        closeIconClass: 'fa fa-close',
        confirm: function(){
          if (activityspamcount > 8) {
          showMarkers();
        }
          if (data.xp_earned == "1") {
            setlevel(data.new_rep,data.new_level,data.new_maxpoints);
          }
        },
        cancel: function(){
            if (activityspamcount > 8) {
          showMarkers();
        }
          if (data.xp_earned == "1") {
          setlevel(data.new_rep,data.new_level,data.new_maxpoints);
        }
      }
    });
        }
        else {
          $.alert({
        title: data.endtitle,
        content: data.feedback,
        icon: makeiconvote,
        backgroundDismiss: true,
        closeIcon: true,
        closeIconClass: 'fa fa-close'
    });
        }

      },
      error:function (){}
      });

    }

    function loginopen() {

      var logincon = '<div id="sidebartra">Join <span style="color:#167b82">881,438</span> registered trainers!</div><a href="https://www.pokemongomap.info/auth/facebook" target="_self"><div id="facebooklogin"><img src="https://www.pokemongomap.info/images/facebook.png" width="24" height="25" alt="Facebook Login" /><div class="logindivide"></div><span>Login with Facebook</span></div></a><a href="https://www.pokemongomap.info/auth/google" target="_self"><div id="googlelogin"><img src="https://www.pokemongomap.info/images/googleg.png" width="24" height="25" alt="Google Sign In" /><div class="logindivide"></div><span>Sign In with Google</span></div></a><a href="https://www.pokemongomap.info/auth/twitter" target="_self"><div id="twitterlogin"><img src="https://www.pokemongomap.info/images/twitter.png" width="24" height="25" alt="Twitter Sign In" /><div class="logindivide"></div><span>Sign In with Twitter</span></div></a><p class="loginfo">Your account is used only for identification</p>';

      $.confirm({
          title: 'Social Account Login',
          content: logincon,
          icon: 'fa fa-sign-in',
          confirmButton: false,
          cancelButton: "Cancel",
          backgroundDismiss: true,
          closeIcon: true,
          closeIconClass: 'fa fa-close'
      });

    }


    $(window).load(function() {


  if (sessionreloadmsg_active != "1") {
  fixgmapui();

  $('.fullfix').css("opacity", "1.0");
  $('.gm-fullscreen-control').css("opacity", "1.0");
  }

    setTimeout(function() { $('#logobarclose').css("opacity", "1.0"); }, 8000);

    });



    window.addEventListener("message", function(event) {
        if (event.data == "gochat-newmessage" && chatvisible == "0") {
        countnewmsgs = countnewmsgs+1;
        var $link = $('.mapchattxt');
        var $img = $link.find('i');
        $link.html('Chat ('+countnewmsgs+')');
        $link.prepend($img);
        $('.mapchatbtn').attr("title","Chat - "+countnewmsgs+" New Messages");

        var $link2 = $('#topchat');
        $link2.html("<div class='msgcount'>"+countnewmsgs+"</div>");
        var $img3 = $link2.find('.msgcount');
        $img3.stop(true,true).fadeOut(400).delay(400).fadeIn(600).delay(400).fadeOut(400).delay(400).fadeIn(600).delay(400).fadeOut(400).delay(400).fadeIn(600).delay(400).fadeOut('400', function() {
        $link2.html('<i class="fa fa-comments-o" aria-hidden="true"></i>');
        });
        }
    });


    $(document).on('mousemove', function(e){
    saveepagex = e.pageX;
    saveepagey = e.pageY;
  if (scanrequestmoveblock != "1") {
      $('#mousescannew').css({
         left:  saveepagex-(mousescanx),
         top:   saveepagey-(mousescany)
      });
    }

    });


$( document ).ready(function() {

if (filteroptionmaptheme == "2") { set_maptheme(2); } else { set_maptheme(1); }

    document.addEventListener('touchstart', function(e) {
      saveepagex = e.changedTouches[0].pageX;
      saveepagey = e.changedTouches[0].pageY;
    if (scanrequestmoveblock != "1") {
      $('#mousescannew').css({
         left:  saveepagex-(mousescanx),
         top:   saveepagey-(mousescany)
      });
    }
      }, false);

      document.addEventListener('touchmove', function(e) {
        saveepagex = e.changedTouches[0].pageX;
        saveepagey = e.changedTouches[0].pageY;
      if (scanrequestmoveblock != "1") {
        $('#mousescannew').css({
           left:  saveepagex-(mousescanx),
           top:   saveepagey-(mousescany)
        });
      }
      }, false);


  sideheight();
  infoboxpicheight();
  FastClick.attach(document.body);

     (adsbygoogle = window.adsbygoogle || []).push({});
 (adsbygoogle = window.adsbygoogle || []).push({});
 //(adsbygoogle = window.adsbygoogle || []).push({});
    



  if (inIframe())
  {
    window.location.replace("https://www.pokemongomap.info/includes/iframe.php");
    }
  else {
  load();
  }

  load = undefined;
  
  if (systemui_logged == "1") {
  setlevel(user_current_points,user_current_level,user_max_level_points,'1');
  }

  $('.tooltip').tooltipster({
   plugins: ['follower'],
   delay: 0,
   contentAsHTML: true,
   zIndex: 999999999
});


$( "#sidebarlogin,#toplogin" ).click(function() {
loginopen();
return false;
});

$( "#map" ).click(function() {
return false;
});

$( ".gpslink" ).click(function() {
geolocate();
window.controller.close();
$( "#topbarcontent" ).show();
chatvisible = 0;
return false;
});

$( "#chatclosebtnbind,#chattitle" ).click(function() {
$('#chathold').hide();
$('#mapdimmer').show();
return false;
});

$( "#mobilemenuclosebtnbind" ).click(function() {
  window.controller.close();
  $( "#topbarcontent" ).show();
  return false;
});

$( "#mobilechatclosebtnbind" ).click(function() {
$("#mobilechatmaster,#mobilechatloop").hide();
chatvisible = 0;
return false;
});


$( "#mapdimmer,#infoboxclosebtnbind" ).click(function() {
$('#mapdimmer').hide();
infoboxopen('/', 'Loading', 'Loading', true);
if (raid_countdown != "notset") {
clearInterval(raid_countdown);
}
if (lure_countdown != "notset") {
clearInterval(lure_countdown);
}
return false;
});


$( "#mapinfobox" ).click(function() {
return false;
});

$( ".scanlink" ).click(function() {
scanrequest();
return false;
});
$( ".pokelink" ).click(function() {
announcement_id = 0;
newsannounce();
window.controller.close();
chatvisible = 0;
$( "#topbarcontent" ).show();
});
$( "#btnsettings" ).click(function() {
mappowers();
return false;
});
$( "#topbtnsettings" ).click(function() {
mappowers();
return false;
});
$( "#footerfaqbtn" ).click(function() {
infoboxopen('', '', '', '', '4');
return false;
});
$( "#mobilefaqbtn" ).click(function() {
infoboxopen('', '', '', '', '4');
window.controller.close();
chatvisible = 0;
$( "#topbarcontent" ).show();
return false;
});


$( ".btnpokeconfirm" ).click(function() {

  var makecpokecon = "Confirmed in-game PokeStop";

  $.confirm({
  title: "Verified PokeStop",
  content: makecpokecon,
  icon: "fa fa-check",
  backgroundDismiss: true,
  closeIcon: true,
  closeIconClass: "fa fa-close",
  confirmButton: 'Request Update',
  cancelButton: 'Close',
  confirm: function(){
  scanrequest();
  }
  });

return false;
});

$( ".btngymconfirm" ).click(function() {
var makecgymcon = "Confirmed in-game Gym<br>No extra information available";




$.confirm({
title: "Verified Gym",
content: makecgymcon,
icon: "fa fa-check",
backgroundDismiss: true,
closeIcon: true,
closeIconClass: "fa fa-close",
confirmButton: 'Request Update',
cancelButton: 'Close',
confirm: function(){
scanrequest();
}
});

return false;
});



$( ".btnpmon" ).click(function() {
var makepgymcon = "<span style='font-weight:bold;'>Recently reported nearby:</span><br> "+globalpmonlist;
$.alert({
title: "Pokemon Nearby",
content: makepgymcon,
icon: "fa fa-bug",
backgroundDismiss: true,
closeIcon: true,
confirmButton: 'Close',
closeIconClass: "fa fa-close",
onOpen: function(){
  $('.tooltip').tooltipster({
   plugins: ['follower'],
   delay: 0,
   contentAsHTML: true,
   zIndex: 999999999
  });
}
});
return false;
});



$( ".btngmon" ).click(function() {

  var makegmonlist = "";
  if (global_curgym_pokemondata != "" && global_curgym_pokemondata != "0"){
    var datares = global_curgym_pokemondata.split("--");
    for (i = 0; i < datares.length; i++) {
    var datain = datares[i].split("##");
    if (datain[0]!="" && datain[1]!="") {
      if(typeof datain[2] !== "undefined"){datain[2] = "<br><span style='color: #999;font-size: 10px;'>"+datain[2]+"</span>";}else{datain[2] = "";}
      if(typeof datain[1] !== "undefined"){datain[1] = "<br><span style='color: #999;font-size: 10px;'>"+datain[1]+" CP</span>";}else{datain[1] = "";}
      makegmonlist = '<div style="display:inline-block"><img class="tooltip" title="'+datain[0]+'" style="width: 40px; height: 40px; display:inline; margin-right:22px; margin-top: 7px; position:relative; left: 6px;" width="40" height="40" src="https://www.pokemongomap.info/images/pmon'+global_curgym_teamid+'.png" alt="" /><div style="text-align:center; width: 100%; display: block; position: relative; right: 5px; font-size:11px;">'+datain[0]+datain[2]+datain[1]+'</div></div>'+makegmonlist;
    }
    }
    makegmonlist = "<div style='width:100%; margin-bottom:0px;'></div>"+makegmonlist;
  }

  var makecgymcon = "<b>Owned By:</b> "+global_curgym_team+"<br><b>Top Guard:</b> "+global_curgym_guard+"<br><br><b>Last Reported:</b> "+global_curgym_lastreport+"<br><b>Last Change:</b> "+global_curgym_lastchange+"<br>"+makegmonlist+"<br><br>";


$.confirm({
title: "Verified Gym",
content: makecgymcon,
icon: "fa fa-star",
backgroundDismiss: true,
closeIcon: true,
closeIconClass: "fa fa-close",
confirmButton: 'Request Update',
cancelButton: 'Close',
confirm: function(){
scanrequest();
}
});
return false;
});

$( ".btngteam" ).click(function() {

  var makegmonlist = "";
  if (global_curgym_pokemondata != "" && global_curgym_pokemondata != "0"){
    var datares = global_curgym_pokemondata.split("--");
    for (i = 0; i < datares.length; i++) {
    var datain = datares[i].split("##");
    if (datain[0]!="" && datain[1]!="") {
    if(typeof datain[2] !== "undefined"){datain[2] = "<br><span style='color: #999;font-size: 10px;'>"+datain[2]+"</span>";}else{datain[2] = "";}
    if(typeof datain[1] !== "undefined"){datain[1] = "<br><span style='color: #999;font-size: 10px;'>"+datain[1]+" CP</span>";}else{datain[1] = "";}
    makegmonlist = '<div style="display:inline-block"><img class="tooltip" title="'+datain[0]+'" style="width: 40px; height: 40px; display:inline; margin-right:22px; margin-top: 7px; position:relative; left: 6px;" width="40" height="40" src="https://www.pokemongomap.info/images/pmon'+global_curgym_teamid+'.png" alt="" /><div style="text-align:center; width: 100%; display: block; position: relative; right: 5px; font-size:11px;">'+datain[0]+datain[2]+datain[1]+'</div></div>'+makegmonlist;
    }
    }
    makegmonlist = "<div style='width:100%; margin-bottom:0px;'></div>"+makegmonlist;
  }

  var makecgymcon = "<b>Owned By:</b> "+global_curgym_team+"<br><b>Top Guard:</b> "+global_curgym_guard+"<br><br><b>Last Reported:</b> "+global_curgym_lastreport+"<br><b>Last Change:</b> "+global_curgym_lastchange+"<br>"+makegmonlist+"<br><br>";


  $.confirm({
  title: "Verified Gym",
  content: makecgymcon,
  icon: "fa fa-shield",
  backgroundDismiss: true,
  closeIcon: true,
  closeIconClass: "fa fa-close",
  confirmButton: 'Request Update',
  cancelButton: 'Close',
  confirm: function(){
  scanrequest();
  }
});
return false;
});







$( "#favbtnbind" ).click(function() {
infoboxaction(1,0);
return false;
});
$( "#beenbtnbind" ).click(function() {
infoboxaction(2,0);
return false;
});
$( ".btngym" ).click(function() {
infoboxaction(4,1);
return false;
});
$( ".btndel" ).click(function() {
infoboxaction(5,1);
return false;
});

$( "#cylink" ).click(function() {
window.open("http://www.cyansub.com");
return false;
});
$( "#cylink2" ).click(function() {
window.open("https://www.reddit.com/message/compose/?to=PokemonGoMap");
return false;
});


$( ".btninfo" ).click(function() {
  $("#chathold").show();
  $('#mapdimmer').hide();
return false;
});


$( ".btnlink" ).click(function() {

  $.ajax({

        url: 'https://www.pokemongomap.info/includes/geoaddr.php',
        cache: false,
        data: {
            'lat': storecurrentmarkerlat,
            'lng': storecurrentmarkerlng,
            'poke_id': storecurrentpokeid
        },

        dataType: 'json',
        type: 'POST',
        async: true,
        success: function (data) {
        if (data) {
        storecurrentmarkeraddr = data.display_name;


      if (copy_israid == "1") {

        if (getraid_level == "5") {
        copy_info = "Legendary Raid";
      }
      else {
        copy_info = "Lvl "+getraid_level+" Raid";
      }

      copy_info += "\r\n"+getraid_boss+" "+getraid_bosscp+" CP - "+getraid_bossmove1+" / "+getraid_bossmove2;

      var startingtime = "";
      var endingtime = "";
      var timedatenow = moment().format();

      var zone_name =  moment.tz.guess();
      var timezone = moment.tz(zone_name).zoneAbbr();

      if (getraid_status == "1") {
      var startingtime = moment(timedatenow).add(global_getraid_timer, 'seconds').format('h:mm a');
      var startingtimeraw = moment(timedatenow).add(global_getraid_timer, 'seconds').format();
      var endingtime = moment(startingtimeraw).add(45, 'minutes').format('h:mm a');

      copy_info += "\r\nStarting at "+startingtime+" "+timezone;
      copy_info += "\r\nEnding at "+endingtime+" "+timezone;
      }

      if (getraid_status == "2") {
      var endingtime = moment(timedatenow).add(global_getraid_timer, 'seconds').format('h:mm a');
      var endingtimeraw = moment(timedatenow).add(global_getraid_timer, 'seconds').format();
      var startingtime = moment(endingtimeraw).subtract(45, 'minutes').format('h:mm a');

      copy_info += "\r\nStarted at "+startingtime+" "+timezone;
      copy_info += "\r\nEnding at "+endingtime+" "+timezone;
      }

      copy_info += "\r\n"+$("#infoboxtitle").html()+" Gym";
      copy_info += "\r\n"+storecurrentmarkeraddr;
      copy_info += "\r\n"+"https://www.pokemongomap.info"+storecurrentmarkerurl;

      }


      var makeraidcopy = "";
      if (copy_israid == "1") {
      makeraidcopy = '&nbsp;&nbsp;|&nbsp;&nbsp;<div id="raidcopy" data-clipboard-text="'+copy_info+'" class="raidcopybtn">Copy Raid Info</div>';
      }

      var makelinkcontent = '<div class="toolscopy"><a target="_blank" href="https://www.google.com/maps/dir/Current+Location/'+storecurrentmarkerlat+','+storecurrentmarkerlng+'" class="popinfo" >Get Directions</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="https://www.pokemongomap.info'+storecurrentmarkerurl+'" target="_blank" class="popinfo">Direct Link</a>'+makeraidcopy+'</div>';

      var makefdesc = "";
      if (storecurrentmarkerdesc != "") {
        makefdesc = "<div style='margin-bottom: 12px;'>"+storecurrentmarkerdesc+"</div>";
      }

      var makefaddr = "";
      if (storecurrentmarkeraddr != "") {
          makefaddr = "<div style='margin-bottom: 12px;'>"+storecurrentmarkeraddr+"</div>";
      }

      makelinkcontent = makelinkcontent+makefaddr+makefdesc+'<div style="margin-bottom: 10px;">You can share this location by using the social links below!</div><div class="addthis_toolbox addthis_default_style addthis_20x20_style" addthis:url="https://www.pokemongomap.info'+storecurrentmarkerurl+'" addthis:title="'+storecurrentmarkertitle+'"><a class="addthis_button_preferred_1" addthis:url="'+storecurrentmarkerurl+'" addthis:title="'+storecurrentmarkertitle+'"></a><a class="addthis_button_preferred_2" addthis:url="'+storecurrentmarkerurl+'" addthis:title="'+storecurrentmarkertitle+'"></a><a class="addthis_button_preferred_3" addthis:url="'+storecurrentmarkerurl+'" addthis:title="'+storecurrentmarkertitle+'"></a><a class="addthis_button_preferred_4" addthis:url="'+storecurrentmarkerurl+'" addthis:title="'+storecurrentmarkertitle+'"></a><a class="addthis_button_compact" addthis:url="'+storecurrentmarkerurl+'" addthis:title="'+storecurrentmarkertitle+'"></a></div>';

                                    $.alert({
                                  title: "More Information",
                                  content: makelinkcontent,
                                  icon: "fa fa-retweet",
                                  backgroundDismiss: true,
                                  closeIcon: true,
                                  closeIconClass: "fa fa-close",
                                    onOpen: function(){
                                        addthis.toolbox('.addthis_toolbox');
                                        if (copy_israid == "1") {
                                        var clipboard = new Clipboard('.raidcopybtn');

      clipboard.on('success', function(e) {
          e.clearSelection();
          $( "#raidcopy" ).html("Copied!");
          setTimeout(function(){ $( "#raidcopy" ).html("Copy Raid Info"); }, 2000);
      });


                                      }
                                    },
                                  confirm: function(){
                                  },
                                  cancel: function(){
                                }
                              });







        }

        }
    });

return false;
});


  $( ".toplink" ).hover(
  function() {
    $( this ).find("img").css('opacity', '1.0');
  }, function() {
  $( this ).find("img").css('opacity', '.75');
  }
);

$( ".btninfo .infoboxbtn, .btnlink .infoboxbtn, #infoboxclosebtnbind, #mobilemenuclosebtnbind, #mobilechatclosebtnbind, #chatclosebtnbind" ).hover(
function() {
if (filteroptionmaptheme == "1") {
  $( this ).find("i").css('color', '#57b2b8');
}
if (filteroptionmaptheme == "2") {
  $( this ).find("i").css('color', '#76d8de');
}
}, function() {
  if (filteroptionmaptheme == "1") {
    $( this ).find("i").css('color', '#39878c');
  }
  if (filteroptionmaptheme == "2") {
    $( this ).find("i").css('color', '#58afb5');
  }
}
);



$( "#infoboxfav, #infoboxbeen" ).hover(
function() {
var $this = $(this);
$this.data('savecolor', $this.find("i").css('color'));
if (filteroptionmaptheme == "1") {
  $( this ).find("i").css('color', '#57b2b8');
}
if (filteroptionmaptheme == "2") {
  $( this ).find("i").css('color', '#76d8de');
}
}, function() {
var $this = $(this);
$( this ).find("i").css('color', $this.data('savecolor'));
}
);

$( ".btnpokeconfirm .infoboxbigbtn" ).hover(
function() {
var $this = $(this);
$this.data('savecolorpokeconfirm2', $this.find(".infoboxbigbtninside").css('border-color'));
$( this ).find(".infoboxbigbtninside").css('border-color', '#41cbe8');
$( this ).find("img").css('opacity', '1.0');
}, function() {
var $this = $(this);
$( this ).find(".infoboxbigbtninside").css('border-color', $this.data('savecolorpokeconfirm2'));
$( this ).find("img").css('opacity', '0.8');
}
);

$( ".btngymconfirm .infoboxbigbtn" ).hover(
function() {
var $this = $(this);
$this.data('savecolorgymconfirm2', $this.find(".infoboxbigbtninside").css('border-color'));
$( this ).find(".infoboxbigbtninside").css('border-color', '#ed8934');
$( this ).find("img").css('opacity', '1.0');
}, function() {
var $this = $(this);
$( this ).find(".infoboxbigbtninside").css('border-color', $this.data('savecolorgymconfirm2'));
$( this ).find("img").css('opacity', '0.8');
}
);





$( ".btnpmon .infoboxbigbtn" ).hover(
function() {
var $this = $(this);
$this.data('savecolorpokeconfirm2', $this.find(".infoboxbigbtninside").css('border-color'));
$( this ).find(".infoboxbigbtninside").css('border-color', '#41cbe8');
$( this ).find("img").css('opacity', '1.0');
}, function() {
var $this = $(this);
$( this ).find(".infoboxbigbtninside").css('border-color', $this.data('savecolorpokeconfirm2'));
$( this ).find("img").css('opacity', '0.8');
}
);



$( ".btngteam,.btngmon" ).hover(
function() {
var $this = $(this);

  if ( $( this ).hasClass( "gteam1" ) ) {
    $( this ).find(".infoboxbigbtninside").css('border-color', '#75a7fe');
    $( this ).find("img").css('opacity', '1.0');
  }
  if ( $( this ).hasClass( "gteam2" ) ) {
    $( this ).find(".infoboxbigbtninside").css('border-color', '#ff7081');
    $( this ).find("img").css('opacity', '1.0');
  }
  if ( $( this ).hasClass( "gteam3" ) ) {
    $( this ).find(".infoboxbigbtninside").css('border-color', '#e6d357');
    $( this ).find("img").css('opacity', '1.0');
  }
  if ( $( this ).hasClass( "gteam4" ) ) {
    $( this ).find(".infoboxbigbtninside").css('border-color', '#b8b8b8');
    $( this ).find("img").css('opacity', '1.0');
  }

}, function() {
var $this = $(this);

if ( $( this ).hasClass( "gteam1" ) ) {
  $( this ).find(".infoboxbigbtninside").css('border-color', '');
  $( this ).find("img").css('opacity', '0.8');
}
if ( $( this ).hasClass( "gteam2" ) ) {
  $( this ).find(".infoboxbigbtninside").css('border-color', '');
  $( this ).find("img").css('opacity', '0.8');
}
if ( $( this ).hasClass( "gteam3" ) ) {
  $( this ).find(".infoboxbigbtninside").css('border-color', '');
  $( this ).find("img").css('opacity', '0.8');
}
if ( $( this ).hasClass( "gteam4" ) ) {
  $( this ).find(".infoboxbigbtninside").css('border-color', '');
  $( this ).find("img").css('opacity', '0.8');
}

}
);




$( ".btndel .infoboxbigbtn" ).hover(
function() {
var $this = $(this);
$this.data('savecolordel1', $this.find("i").css('color'));
$this.data('savecolordel2', $this.find(".infoboxbigbtninside").css('border-color'));
$( this ).find("i").css('color', '#df7878');
$( this ).find(".infoboxbigbtninside").css('border-color', '#df7878');
}, function() {
var $this = $(this);
$( this ).find("i").css('color', $this.data('savecolordel1'));
$( this ).find(".infoboxbigbtninside").css('border-color', $this.data('savecolordel2'));
}
);

$( ".btngym .infoboxbigbtn" ).hover(
function() {
var $this = $(this);
$this.data('savecolorgym1', $this.find("i").css('color'));
$this.data('savecolorgym2', $this.find(".infoboxbigbtninside").css('border-color'));
$( this ).find("i").css('color', '#31b9d6');
$( this ).find(".infoboxbigbtninside").css('border-color', '#31b9d6');
}, function() {
var $this = $(this);
$( this ).find("i").css('color', $this.data('savecolorgym1'));
$( this ).find(".infoboxbigbtninside").css('border-color', $this.data('savecolorgym2'));
}
);


$( "#logobarclose" ).hover(
function() {
  $( this ).find("img").css('opacity', '1.0');
}, function() {
$( this ).find("img").css('opacity', '.75');
}
);

$( "#btnsettings,#btnlogout,#topbtnsettings,#topbtnlogout" ).hover(
function() {
  $( this ).find("i").css('color', '#fff');
}, function() {
  if (filteroptionmaptheme == "1") {
      $( this ).find("i").css('color', '#167b82');
  }
  if (filteroptionmaptheme == "2") {
$( this ).find("i").css('color', '#58afb5');
  }
}
);


$( "#logobarclose" ).click(function() {
$( "#logobar" ).hide();
$( "#logobarloop" ).hide();
$( "#logobarclose" ).hide();
$( "#map" ).css('bottom', "0px");
$( "#spammsg" ).css('bottom', "0px");
google.maps.event.trigger(map, "resize");
if (scanrequestmoveblock == "1") {
        $('#mousescannew').hide();
      }
return false;
});



$("#infoboxpic").swipe( {
						//Generic swipe handler for all directions
						swipe:function(event, direction, distance, duration, fingerCount, fingerData) {
              var makeclass="coinflipR";
              if (direction == "left") {makeclass = "coinflip";}
              if (direction == "right") {makeclass = "coinflipR";}
              if (direction == "up") {makeclass = "coinflipU";}
              if (direction == "down") {makeclass = "coinflipD";}



              if (systemui_logged == "1") {


              if(typeof xhrsaveswipe !== "undefined")
              {
              xhrsaveswipe.abort();
              }

              xhrsaveswipe = $.ajax({

                    url: 'https://www.pokemongomap.info/includes/swipecheck.php',
                    cache: false,
                    dataType: 'json',
                    type: 'POST',
                    async: true,
                    success: function (data) {
                        if (data) {

                          if (data.xp_earned == "1") {

                            setTimeout(function() {

                            $.alert({
                          title: "Earned RP",
                          content: "<span style=\'color:#167b82;\'>Earned 250 RP!</span>",
                          icon: "fa fa-star",
                          backgroundDismiss: true,
                          closeIcon: true,
                          closeIconClass: "fa fa-close",
                          confirm: function(){
                              setlevel(data.new_rep,data.new_level,data.new_maxpoints);
                          },
                          cancel: function(){
                            setlevel(data.new_rep,data.new_level,data.new_maxpoints);
                        }
                      });

                    }, 2000);

                          }


                        }
                    }
                });

              }


              $("#infoboxpic").addClass(makeclass).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend", function(){
                $("#infoboxpic").removeClass(makeclass);
              });

						},
						//Default is 75px, set to 0 for demo so any distance triggers swipe
					   threshold:10
					});











          var announcement_id = 0;

          var news_html = [
          ['New Features', '<span style="font-weight:bold;line-height: 20px;">Sponsored Locations</span><br>A new mode to display only sponsored locations has been added. You can enable this in the <a class="gosettings" href="#" data-tab="1">settings</a> menu.<br><br><span style="font-weight:bold;line-height: 20px;">Location Search</span><br>You can now <a class="gosearch" href="#" data-tab="2">search</a> directly for pokestops and gyms by name. Results will order by closest to your current map area first.<br><br><span style="font-weight:bold;line-height: 20px;">Dark Theme</span><br>Playing Pokemon GO at night? Our first new theme is now available! This can be selected in the <a class="gosettings" href="#" data-tab="3">settings</a> menu.'],
          ['New Features', '<span style="font-weight:bold;line-height: 20px;">Filter Options</span><br>You can now <a class="gosettings" href="#" data-tab="1">filter raids</a> by their individual levels.<br><br><span style="font-weight:bold;line-height: 20px;">Region Update Options</span><br>You can now choose the area size and type of locations to include when requesting an update. Small size is fastest!'],
          ['New Features', '<span style="font-weight:bold;line-height: 20px;">Raid Filters</span><br>You can now filter raids by level in the <a class="gosettings" href="#" data-tab="1">settings</a> menu. You can also disable pokestops & gyms for a new raid only mode.<br><br><span style="font-weight:bold;line-height: 20px;">Share Raids</span><br>Hit the more information (i) button on a raid. You can then tap \'copy raid info\' and paste it for easy sharing! Times are converted to your local zone.'],
          ['New Features', '<span style="font-weight:bold;line-height: 20px;">Find Raids</span><br>If a gym has a raid it will now appear bigger than normal. Click into them for a countdown with boss and level information. Legendary raids will show up as solid black triangles.<br><br><span style="font-weight:bold;line-height: 20px;">Pokemon Nests</span><br>Enable this in the <a class="gosettings" href="#" data-tab="1">settings</a> menu and nests from all around the world will display on the map as bright pink circles.'],
          ['New Features', '<span style="font-weight:bold;line-height: 20px;">Farming Mode</span><br>This mode can now be enabled in the <a class="gosettings" href="#" data-tab="2">settings</a> menu. It will highlight locations based on how many others are nearby.<br><br><span style="font-weight:bold;line-height: 20px;">Find Pokemon</span><br>Many pokestops also now show which Pokemon have been reported as spawning nearby.']
          ];


          function newsannounce() {

          var newsmax = news_html.length;
          var confirmstatus = 'Previous News';
          if ((announcement_id+1) == newsmax)
          {
          confirmstatus = false;
          }

            $.confirm({
          title: news_html[announcement_id][0],
          content: news_html[announcement_id][1],
          icon: 'fa fa-star',
          backgroundDismiss: true,
          confirmButton: confirmstatus,
          cancelButton: 'Close',
          closeIcon: true,
          closeIconClass: 'fa fa-close',
          confirm: function(){
          announcement_id++;
          newsannounce();
          },
          cancel: function(){
          },
          onOpen: function(){


          $( ".popeventloc" ).click(function(e) {
          var getlat = $(this).attr("data-lat");
          var getlng = $(this).attr("data-lng");
          var pos = new google.maps.LatLng(getlat, getlng);
          map.setCenter(pos);
          map.setZoom(15);
          if (scanrequestmoveblock == "1") {
            $('#mousescannew').hide();
          }
          });


          $( ".gosettings" ).click(function() {
          var gettabopen = $(this).attr("data-tab");
          filtersdrop(gettabopen);
          return false;
          });

          $( ".gosearch" ).click(function() {
          var gettabopen = $(this).attr("data-tab");
          searchloc("","","","","","","","","",gettabopen);
          return false;
          });

          }
          });

          }

           if (announcement_read == "0") {
             setTimeout(function(){
               newsannounce()
             }, 2000);
           }







            addthis.init();
            var addthis_config = addthis_config||{};
            addthis_config.pubid = 'ra-5791a28249b3c060';

          
                        var disqus_config = function () {
                    this.page.url = "http://www.pokemongomap.info";
                    this.page.identifier = "0";
                    this.page.title = "PokemonGoMap.info - PokeStop & Gym Chat!";
                };
              
            var d = document, s = d.createElement('script');
            s.src = '//pokemonmap.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);


      if (updateactive == "1") {
        requestloopcount = 0;
        global_updatekey = updatetoken;
        requestloop();
        setTimeout(function() { updatestatus(5,0,0); }, 1050);
      }

  });

  </script>
<style type="text/css">

  div #userpicimg {
  background-image: url("");
  }

  div #topuserpicimg {
  background-image: url("");
  }

  div#sidebarimage {
  background-image: url("https://www.pokemongomap.info/images/sidebar-image.jpg");
  }
  div#sidebarmobileimage {
  background-image: url("https://www.pokemongomap.info/images/sidebar-image.jpg");
  }
  div#sidebarchatimage {
  background-image: url("https://www.pokemongomap.info/images/sidebarR-image.jpg");
  }
  div#sidebarRimage {
  background-image: url("https://www.pokemongomap.info/images/sidebarR-image.jpg");
  }

  div#mobilemenuimage {
  background-image: url("https://www.pokemongomap.info/images/sidebar-image.jpg");
  }

  div#logobarimage {
  background-image: url("https://www.pokemongomap.info/images/logobarbg.jpg");
  }


  .themedark div#sidebarimage {
  background-image: url("https://www.pokemongomap.info/images/sidebar-image-dark.jpg");
  }
  .themedark div#sidebarmobileimage {
  background-image: url("https://www.pokemongomap.info/images/sidebar-image-dark.jpg");
  }
  .themedark div#mobilemenuimage {
  background-image: url("https://www.pokemongomap.info/images/sidebar-image-dark.jpg");
  }


  #mapcustomad-big div {
  background: url("https://www.pokemongomap.info/images/ads/bookad-big.jpg") no-repeat center center;
  -webkit-background-size: contain;
  -moz-background-size: contain;
  -o-background-size: contain;
  background-size: contain;
  }

  #mapcustomad-small div {
  background: url("https://www.pokemongomap.info/images/ads/bookad-small.jpg") no-repeat center center;
  -webkit-background-size: contain;
  -moz-background-size: contain;
  -o-background-size: contain;
  background-size: contain;
  }

  #mapcustomad-medium div {
  background: url("https://www.pokemongomap.info/images/ads/bookad-med.jpg") no-repeat center center;
  -webkit-background-size: contain;
  -moz-background-size: contain;
  -o-background-size: contain;
  background-size: contain;
  }

#favmarkers img {
  filter: saturate(250%) drop-shadow(2px 2px 5px rgba(0,0,0,0.4));
  	-webkit-filter: saturate(250%) drop-shadow(2px 2px 5px rgba(0,0,0,0.4));
  	-moz-filter: saturate(250%) drop-shadow(2px 2px 5px #000); drop-shadow(2px 2px 5px rgba(0,0,0,0.4));
  	-o-filter: saturate(250%) drop-shadow(2px 2px 5px rgba(0,0,0,0.4));
  	-ms-filter: saturate(250%) drop-shadow(2px 2px 5px rgba(0,0,0,0.4));
    animation: bounce 2s infinite;
-webkit-animation: bounce 2s infinite;
-moz-animation: bounce 2s infinite;
-o-animation: bounce 2s infinite;
}


@-webkit-keyframes bounce {
 0%, 20%, 50%, 80%, 100% {-webkit-transform: translateY(0);}
 40% {-webkit-transform: translateY(3px);}
 60% {-webkit-transform: translateY(1px);}
}

@-moz-keyframes bounce {
 0%, 20%, 50%, 80%, 100% {-moz-transform: translateY(0);}
 40% {-moz-transform: translateY(3px);}
 60% {-moz-transform: translateY(1px);}
}

@-o-keyframes bounce {
 0%, 20%, 50%, 80%, 100% {-o-transform: translateY(0);}
 40% {-o-transform: translateY(3px);}
 60% {-o-transform: translateY(1px);}
}
@keyframes bounce {
 0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
 40% {transform: translateY(3px);}
 60% {transform: translateY(1px);}
}

</style>
<link href="https://www.pokemongomap.info/css/font-awesome-4.6.3/css/font-awesome.min.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css"/>
<link href="https://www.pokemongomap.info/css/tooltipster.bundle.min.css" rel="stylesheet" type="text/css"/>
<link href="https://www.pokemongomap.info/css/tooltipster-follower.min.css" rel="stylesheet" type="text/css"/>
<link href="https://www.pokemongomap.info/css/jquery-confirm.min.css" rel="stylesheet" type="text/css"/>
<link href="https://www.pokemongomap.info/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="https://www.pokemongomap.info/css/slidebars.min.css" rel="stylesheet" type="text/css"/>
<link href="https://www.pokemongomap.info/css/main131.css" rel="stylesheet" type="text/css"/>
<link href="https://www.pokemongomap.info/images/favicon/apple-icon-57x57.png" rel="apple-touch-icon" sizes="57x57"/>
<link href="https://www.pokemongomap.info/images/favicon/apple-icon-60x60.png" rel="apple-touch-icon" sizes="60x60"/>
<link href="https://www.pokemongomap.info/images/favicon/apple-icon-72x72.png" rel="apple-touch-icon" sizes="72x72"/>
<link href="https://www.pokemongomap.info/images/favicon/apple-icon-76x76.png" rel="apple-touch-icon" sizes="76x76"/>
<link href="https://www.pokemongomap.info/images/favicon/apple-icon-114x114.png" rel="apple-touch-icon" sizes="114x114"/>
<link href="https://www.pokemongomap.info/images/favicon/apple-icon-120x120.png" rel="apple-touch-icon" sizes="120x120"/>
<link href="https://www.pokemongomap.info/images/favicon/apple-icon-144x144.png" rel="apple-touch-icon" sizes="144x144"/>
<link href="https://www.pokemongomap.info/images/favicon/apple-icon-152x152.png" rel="apple-touch-icon" sizes="152x152"/>
<link href="https://www.pokemongomap.info/images/favicon/apple-icon-180x180.png" rel="apple-touch-icon" sizes="180x180"/>
<link href="https://www.pokemongomap.info/images/favicon/android-icon-192x192.png" rel="icon" sizes="192x192" type="image/png"/>
<link href="https://www.pokemongomap.info/images/favicon/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/>
<link href="https://www.pokemongomap.info/images/favicon/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png"/>
<link href="https://www.pokemongomap.info/images/favicon/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/>
<link href="https://www.pokemongomap.info/manifest.json" rel="manifest"/>
<meta content="#ffffff" name="msapplication-TileColor"/>
<meta content="https://www.pokemongomap.info/images/favicon/ms-icon-144x144.png" name="msapplication-TileImage"/>
<meta content="#ffffff" name="theme-color"/>
<script src="https://www.pokemongomap.info/js/slidebars.min.js" type="text/javascript"></script>
<script src="https://www.pokemongomap.info/js/moment.min.js" type="text/javascript"></script>
<script src="https://www.pokemongomap.info/js/moment-timezone.min.js" type="text/javascript"></script>
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<style type="text/css">
</style>
</meta></head>
<body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.7";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
<div canvas="container">
<div style="position:absolute; overflow:hidden; z-index:2; pointer-events:none; left:0; right:0; top: 0; bottom: 0;"><div id="mousescannew" style="display:none;width: 1px; height:1px; position: absolute; pointer-events:none;"><img src="https://www.pokemongomap.info/images/regionarea.png" style="width: 100%; height:auto;"/></div></div>
<div id="sidebar">
<div id="mapfooter">
<div id="mapfooterhead">© 2017 <a href="http://www.pokegomap.info" target="_blank" title="PokeGoMap.info">PokeGoMap.Info</a>  |  <a href="http://www.pokemongomap.info/privacy.html" id="footerprivbtn" target="_blank">Privacy</a>  |  <a href="#" id="footerfaqbtn" target="_self">FAQ</a>  |  <a href="http://www.cyansub.com" id="footcy" target="_blank">CyanSub.com</a></div>
<div id="mapfootersub">Unofficial website not affiliated with Niantic or Nintendo</div>
</div>
<div id="sidebarcontent">
<div id="sidebartopcontent">
<div id="sidebarlogo"><a class="tooltip" href="https://www.pokemongomap.info" target="_blank" title="PokemonGoMap.info"><img alt="www.pokegomap.info" height="46" src="https://www.pokemongomap.info/images/pokemongomapinfo.png" width="285"/></a></div>
<div id="sidebarsub">Currently <span id="subval">5,274,966</span> PokeStop &amp; Gym Locations</div>
<div id="sidebardivide"></div>
<a href="#" target="_self"><div id="sidebarlogin">
<i aria-hidden="true" class="fa fa-sign-in"></i><div id="logindivide"></div><span>Social Account Login</span>
</div></a>
</div>
<!-- Pokemon Go Map - Square Top -->
<div id="mapad" style="display:block;"><ins class="adsbygoogle" data-ad-client="ca-pub-5844813528048718" data-ad-slot="6406874182" style="display:inline-block"></ins></div>
</div>
<div id="sidebarimage"></div>
</div>
<div id="sidebarloop"></div>
<!-- <div id="sidebarR">
    <div id="sidebarRcontent" style="height: 100%; overflow:hidden;">
    </div>
    <div id="sidebarRimage"></div>
    </div>
    <div id="sidebarRloop"></div> -->
<div id="topbar"><div class="loggedout" id="topbarcontent">
<div id="topbarlogo">
<a class="tooltip" href="https://www.pokemongomap.info" target="_blank" title="PokemonGoMap.info"><img alt="www.pokegomap.info" src="https://www.pokemongomap.info/images/logosmall.png" style="width: auto; height: 28px;"/></a>
</div>
<div id="topbarsub">Currently <span id="subval">5,274,966</span> <span class="topbarsubhide">PokeStop &amp; Gym </span>Locations</div>
<div id="topmenuhold">
<div id="topmenuhit"></div>
<a href="#" target="_self"><div id="topmenu">
<i aria-hidden="true" class="fa fa-bars"></i>
</div></a>
</div>
<div id="topchathold">
<div id="topchathit"></div>
<a href="#" target="_self"><div id="topchat">
<i aria-hidden="true" class="fa fa-comments-o"></i>
</div></a>
</div>
<div id="toplog">
<a href="#" target="_self"><div id="toplogin">
<i aria-hidden="true" class="fa fa-sign-in"></i><div id="toplogindivide"></div><span class="gnormsize">Login</span><span class="gmobsize">Login</span>
</div></a>
</div>
<div id="topscan"><a class="toplink scanlink" href="#" target="_self" title="Request a region update"><img alt="Request Region Update" src="https://www.pokemongomap.info/images/pokeico.png"/><span class="normsize">Request Region Update</span><span class="mobsize">Request Update</span></a></div>
<div id="toptwitch"><a class="toplink twitchlink" href="https://www.reddit.com/message/compose/?to=PokemonGoMap" target="_blank"><img alt="Send Us Feedback!" src="https://www.pokemongomap.info/images/twitchico.png"/><span class="normsize">Send Feedback!</span><span class="mobsize">Send Feedback!</span></a></div>
<div id="toppokemon"><a class="toplink pokelink" href="#" target="_self" title="Latest Map News"><img alt="Latest Map News" src="https://www.pokemongomap.info/images/chatico.png"/><span class="normsize">Latest Map News</span><span class="mobsize">Map News</span></a></div>
<div id="topfb"><iframe height="65" src="https://www.facebook.com/plugins/like.php?href=https%3A%2F%2Fwww.facebook.com%2FPokemonGoMap.info%2F&amp;width=98&amp;layout=button&amp;action=like&amp;show_faces=true&amp;share=true&amp;height=65&amp;appId" style="border:none; border-width: 0px; width: 100px; height: 65px; overflow: hidden; background-color: transparent;" width="100"></iframe></div>
<div id="toptw"><a class="twitter-follow-button" data-dnt="true" data-show-count="false" data-show-screen-name="false" href="https://twitter.com/Pokemon_GO_Map"></a></div>
</div></div>
<div id="topbarloop"></div>
<div id="logobarclose"><img alt="Close Footer Bar" height="15" src="https://www.pokemongomap.info/images/closeheader.png" width="30"/></div>
<div id="logobar"><div id="logobarcontent">
<div id="logobarholder">
<!-- Pokemon Go Map - Mobile -->
<div id="smallmapad" style="display:block;"><ins class="adsbygoogle" data-ad-client="ca-pub-5844813528048718" data-ad-slot="9282092187" style="display:inline-block"></ins></div>
</div>
</div>
</div>
<div id="logobarloop"></div>
<div id="mapdimmer">
<div id="mapinfobox">
<div id="mapinfoboxhold"><div id="mapinfoboximage"></div></div>
<div id="mapinfoboxcontent">
<div id="infoboxbuttons">
<a class="tooltip" href="#" id="favbtnbind" target="_self" title=""><div class="infoboxbtn" id="infoboxfav"><div class="infoiconhold"><i aria-hidden="true" class="fa fa-crosshairs"></i></div><div id="favval"></div></div></a>
<a class="tooltip" href="#" id="beenbtnbind" target="_self" title=""><div class="infoboxbtn" id="infoboxbeen"><div class="infoiconhold"><i aria-hidden="true" class="fa fa-users"></i></div><div id="beenval"></div></div></a>
<a class="tooltip" href="#" id="infoboxclosebtnbind" target="_self" title="Return To Map"><div id="infoboxclosehit"></div><div class="infoboxbtn" id="infoboxclosebtn"><i aria-hidden="true" class="fa fa-times"></i></div></a>
</div>
<div id="infoboxlowerbuttons">
<a class="tooltip bigbtnlinkhold btnpokeconfirm" href="#" target="_self" title="Verified PokeStop"><div class="infoboxbtn infoboxbigbtn"><div id="pokeconfirmval">PokeStop</div><div class="infoboxbigbtnin"><div class="infoboxbigbtninside pokeconf"><img alt="Verified PokeStop" src="https://www.pokemongomap.info/images/markerpoke.png"/></div></div></div></a>
<a class="tooltip bigbtnlinkhold btngymconfirm" href="#" target="_self" title="Verified Gym"><div class="infoboxbtn infoboxbigbtn"><div id="gymconfirmval">Gym</div><div class="infoboxbigbtnin"><div class="infoboxbigbtninside gymconf"><img alt="Verified Gym" src="https://www.pokemongomap.info/images/markergym.png"/></div></div></div></a>
<a class="tooltip bigbtnlinkhold btndel" href="#" target="_self" title=""><div class="infoboxbtn infoboxbigbtn bigbtndel"><div id="delval"></div><div class="infoboxbigbtnin"><div class="infoboxbigbtninside"><i aria-hidden="true" class="fa fa-times"></i></div></div></div></a>
<a class="tooltip bigbtnlinkhold btngym" href="#" target="_self" title=""><div class="infoboxbtn infoboxbigbtn"><div id="gymval"></div><div class="infoboxbigbtnin"><div class="infoboxbigbtninside"><i aria-hidden="true" class="fa fa-shield"></i></div></div></div></a>
<a class="tooltip bigbtnlinkhold btnpmon" href="#" target="_self" title="Pokemon Nearby"><div class="infoboxbtn infoboxbigbtn"><div id="pmonval"></div><div class="infoboxbigbtnin"><div class="infoboxbigbtninside pokeconf"><img alt="" height="22" id="pmonimg" src="https://www.pokemongomap.info/images/pmonpoke.png" style="left: 6px; top: 6px;" width="24"/></div></div></div></a>
<a class="tooltip bigbtnlinkhold btngteam" href="#" target="_self" title=""><div class="infoboxbtn infoboxbigbtn"><div id="gteamval"></div><div class="infoboxbigbtnin"><div class="infoboxbigbtninside"><img alt="" height="22" id="gteamimg" src="https://www.pokemongomap.info/images/transparent.png" width="24"/></div></div></div></a>
<a class="tooltip bigbtnlinkhold btngmon" href="#" target="_self" title=""><div class="infoboxbtn infoboxbigbtn"><div id="gmonval"></div><div class="infoboxbigbtnin"><div class="infoboxbigbtninside"><img alt="" height="22" id="gmonimg" src="https://www.pokemongomap.info/images/transparent.png" style="left: 6px; top: 6px;" width="24"/></div></div></div></a>
<a class="tooltip bigbtnlinkhold btninfo" href="#" target="_self" title="View Comments"><div class="infoboxbtn infoboxbigbtn"><div id="infoval"></div><div class="infoboxbigbtnin"><div class="infoboxbigbtninside"><i aria-hidden="true" class="fa fa-comments"></i></div></div></div></a>
<a class="tooltip bigbtnlinkhold btnlink" href="#" target="_self" title="More Information"><div class="infoboxbtn infoboxbigbtn"><div id="linkval"></div><div class="infoboxbigbtnin"><div class="infoboxbigbtninside"><i aria-hidden="true" class="fa fa-info"></i></div></div></div></a>
</div>
<div id="reqpagecontenthold">
<div id="reqinfoboxtitle"></div>
<div id="reqinfoboxdivide"></div>
<div id="infoboxpokemon">
<div class="deniedmsg">Report and view Pokemon sightings from around the world - coming soon!</div>
</div>
<div id="infoboxfaq">
<div class="faqq"><b>Do you take feedback and suggestions?</b></div>
<div>We sure do! Just leave us a note through <a href="#" id="cylink2">reddit</a>. We appreciate all feedback good and bad!</div>
<br/>
<div class="faqq"><b>What are the buttons when I click into a location?</b></div>
<div>Those are for highlighting, marking a visit or viewing comments. You can also vote on it either not existing or being a gym.</div>
<br/>
<div class="faqq"><b>How does the voting work?</b></div>
<div>Signed in users can mark / vote on unverified locations and their maps update instantly to reflect that. Once enough people vote - it will be updated on everyones map.</div>
<br/>
<div class="faqq"><b>How does the level thing work?</b></div>
<div>You earn RP for being active on the site but each action has an earning cooldown. High level members get extra powers, like reporting gym ownership and raid information.</div>
<br/>
<div class="faqq"><b>How is the data collected?</b></div>
<div>All data is provided by third party suppliers. Region updates are not performed directly by us or visitors. Therefore it is completely safe to login to our website.</div>
<br/>
<div class="faqq"><b>I thought it said over 5 million locations?</b></div>
<div>There is! However it can only load upto 450 at a time, so zoom in to see them all.</div>
</div>
<div id="infoboxsettings">
<div class="deniedmsg">A range of settings for customizing the website - coming soon!</div>
</div>
</div>
<div id="pagecontenthold">
<div id="infoboxtitle"></div>
<div id="infoboxdivide"></div>
<div id="infoboxpic"><div id="raidinfo"><div id="raidmsghold"></div><div id="raidbosshold"></div><div id="raidtimehold"><div class="raidstatustop"></div><div class="raidtime"></div><div class="raidstatus"></div></div></div><div id="infoboxpicin"><div id="infoboxpicimg"><div id="infoboxpicraid"></div></div></div><div id="sponsorinfo"><div id="sponsormsghold" style="margin-bottom: 0px;">Sponsored</div></div></div>
</div>
</div>
</div>
</div>
<div id="chathold">
<div id="chattopbar">
<div class="tooltip" id="chattitle" title="Go Back"></div>
<a class="tooltip" href="#" id="chatclosebtnbind" target="_self" title="Go Back"><div id="chatclosehit"></div><div class="infoboxbtn" id="chatclosebtn"><i aria-hidden="true" class="fa fa-times"></i></div></a>
</div>
<div id="disqus_thread"></div>
</div>
<div class="updatestatushold"><div class="updatebtn" title="Update Status"><img class="spinnerupd" src="https://www.pokemongomap.info/images/pokeico.png"/><span class="updatetxt">In Queue</span></div></div>
<div id="map"></div>
<div id="markerseo"></div>
</div>
<div class="mobilemenu" off-canvas="mainmenu left reveal">
<div class="mobilemenucontent">
<a class="tooltip" href="#" id="mobilemenuclosebtnbind" target="_self" title="Close Menu"><div id="mobilemenuclosehit"></div><div class="mobilemenubtn" id="mobilemenuclosebtn"><i aria-hidden="true" class="fa fa-times"></i></div></a>
<div id="mobilelogo">
<a class="tooltip" href="https://www.pokemongomap.info" target="_blank" title="PokemonGoMap.info"><img alt="www.pokegomap.info" src="https://www.pokemongomap.info/images/pokemongomapinfo.png" style="width: 100%; height: auto;"/></a>
</div>
<div style="clear:both;"></div>
<div id="mobilesub">Currently <span id="subval">5,274,966</span> PokeStop &amp; Gym Locations</div>
<div id="menugps"><a class="toplink gpslink mobimenu" href="#" target="_self" title="Goto My GPS Location"><img alt="Goto My GPS Location" src="https://www.pokemongomap.info/images/gpsico.png"/>Goto My GPS Location</a></div>
<div id="menuscan"><a class="toplink scanlink mobimenu" href="#" target="_self" title="Request a region update"><img alt="Request Region Update" src="https://www.pokemongomap.info/images/pokeico.png"/>Request Region Update</a></div>
<div id="menutwitch"><a class="toplink twitchlink" href="https://www.reddit.com/message/compose/?to=PokemonGoMap" target="_blank"><img alt="Send us feedback!" src="https://www.pokemongomap.info/images/twitchico.png"/>Send Feedback &amp; Suggestions</a></div>
<div id="menupokemon"><a class="toplink pokelink" href="#" target="_self" title="Latest Map News"><img alt="Latest Map News" src="https://www.pokemongomap.info/images/chatico.png"/>View Latest Map News</a></div>
</div>
<div id="menusocial">
<div id="menusocialin">
<div id="menufb"><iframe height="65" src="https://www.facebook.com/plugins/like.php?href=https%3A%2F%2Fwww.facebook.com%2FPokemonGoMap.info%2F&amp;width=98&amp;layout=button&amp;action=like&amp;show_faces=true&amp;share=true&amp;height=65&amp;appId" style="border:none; border-width: 0px; width: 100px; height: 65px; overflow: hidden; background-color: transparent;" width="100"></iframe></div>
<div id="menutw"><a class="twitter-follow-button" data-dnt="true" data-show-count="false" data-show-screen-name="false" href="https://twitter.com/Pokemon_GO_Map" id="menutwfollow"></a></div>
</div>
</div>
<div id="mobilefooter">
<div id="mobilefooterhead">© 2017 <a href="http://www.pokegomap.info" target="_blank" title="PokeGoMap.info">PokeGoMap.Info</a>  |  <a href="http://www.pokemongomap.info/privacy.html" id="mobileprivbtn" target="_blank">Privacy</a>  |  <a href="#" id="mobilefaqbtn" target="_self">FAQ</a>  |  <a href="http://www.cyansub.com" id="mobilecy" target="_blank">CyanSub</a></div>
<div id="mobilefootersub">Unofficial website not affiliated with Niantic or Nintendo</div>
</div>
<div id="sidebarmobileimage"></div>
</div>
<div class="mobilechathold" id="mobilechatmaster">
<div class="mobilechatcontent">
<a class="tooltip" href="#" id="mobilechatclosebtnbind" target="_self" title="Close Chat"><div id="mobilechatclosehit"></div><div class="mobilemenubtn" id="mobilechatclosebtn"><i aria-hidden="true" class="fa fa-times"></i></div></a>
<div id="mobilechatiframehold"></div>
</div>
<div id="sidebarchatimage"></div>
</div>
<div id="mobilechatloop"></div>
<script>
     ( function ( $ ) {
       window.controller = new slidebars();
       window.controller.init();
       $( '#topmenuhold' ).on( 'click', function ( event ) {
  event.stopPropagation();
  event.preventDefault();
  window.controller.open( 'mainmenu', function () {
    twttr.widgets.load();
  } );
  $( "#topbarcontent" ).hide();
  $("#mobilechatmaster,#mobilechatloop").hide();
  chatvisible = 0;
} );

$( '#topchathold' ).on( 'click', function ( event ) {
event.stopPropagation();
event.preventDefault();
chatmobile();
} );

     } ) ( jQuery );
   </script>
<script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-80703889-1', 'auto');
      ga('send', 'pageview');

    </script>
<script src="//s7.addthis.com/js/300/addthis_widget.js#async=1" type="text/javascript"></script>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</body>
</html>
